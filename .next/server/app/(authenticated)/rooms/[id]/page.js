(()=>{var e={};e.id=994,e.ids=[994],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9646:e=>{"use strict";e.exports=require("child_process")},5511:e=>{"use strict";e.exports=require("crypto")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1645:e=>{"use strict";e.exports=require("net")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},4631:e=>{"use strict";e.exports=require("tls")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},9727:()=>{},7990:()=>{},9317:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>d,pages:()=>h,routeModule:()=>u,tree:()=>c});var s=r(260),n=r(8203),o=r(5155),i=r.n(o),a=r(7292),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let c=["",{children:["(authenticated)",{children:["rooms",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7597)),"/Users/joe.lai/Desktop/projects/test/trpg/frontend/src/app/(authenticated)/rooms/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1395)),"/Users/joe.lai/Desktop/projects/test/trpg/frontend/src/app/(authenticated)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"/Users/joe.lai/Desktop/projects/test/trpg/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],h=["/Users/joe.lai/Desktop/projects/test/trpg/frontend/src/app/(authenticated)/rooms/[id]/page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(authenticated)/rooms/[id]/page",pathname:"/rooms/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},690:(e,t,r)=>{Promise.resolve().then(r.bind(r,7597))},7546:(e,t,r)=>{Promise.resolve().then(r.bind(r,6182))},4677:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(s++,"%c"===e&&(n=s))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(8604)(t);let{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},8604:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,o;let i=null;function a(...e){if(!a.enabled)return;let s=Number(new Date),n=s-(r||s);a.diff=n,a.prev=r,a.curr=s,r=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,s)=>{if("%%"===r)return"%";o++;let n=t.formatters[s];if("function"==typeof n){let t=e[o];r=n.call(a,t),e.splice(o,1),o--}return r}),t.formatArgs.call(a,e),(a.log||t.log).apply(a,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(n!==t.namespaces&&(n=t.namespaces,o=t.enabled(e)),o),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,r){let s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(n),...t.skips.map(n).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let s=("string"==typeof e?e:"").split(/[\s,]+/),n=s.length;for(r=0;r<n;r++)s[r]&&("-"===(e=s[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,s;if("*"===e[e.length-1])return!0;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(5237),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},8853:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=r(4677):e.exports=r(7533)},7533:(e,t,r)=>{let s=r(3997),n=r(8354);t.init=function(e){e.inspectOpts={};let r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(...e){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){let{namespace:s,useColors:n}=this;if(n){let t=this.color,n="\x1b[3"+(t<8?t:"8;5;"+t),o=`  ${n};1m${s} \u001B[0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(n+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else r[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+s+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:s.isatty(process.stderr.fd)},t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=r(6055);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e},{}),e.exports=r(8604)(t);let{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},512:e=>{"use strict";e.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(r+e),n=t.indexOf("--");return -1!==s&&(-1===n||s<n)}},4849:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1680).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},4097:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1680).A)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},5237:e=>{function t(e,t,r,s){return Math.round(e/r)+" "+s+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var s,n,o=typeof e;if("string"===o&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===o&&isFinite(e))return r.long?(s=Math.abs(e))>=864e5?t(e,s,864e5,"day"):s>=36e5?t(e,s,36e5,"hour"):s>=6e4?t(e,s,6e4,"minute"):s>=1e3?t(e,s,1e3,"second"):e+" ms":(n=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":n>=36e5?Math.round(e/36e5)+"h":n>=6e4?Math.round(e/6e4)+"m":n>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6956:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(s++,"%c"===e&&(n=s))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(1183)(t);let{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},1183:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,o;let i=null;function a(...e){if(!a.enabled)return;let s=Number(new Date),n=s-(r||s);a.diff=n,a.prev=r,a.curr=s,r=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,s)=>{if("%%"===r)return"%";o++;let n=t.formatters[s];if("function"==typeof n){let t=e[o];r=n.call(a,t),e.splice(o,1),o--}return r}),t.formatArgs.call(a,e),(a.log||t.log).apply(a,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(n!==t.namespaces&&(n=t.namespaces,o=t.enabled(e)),o),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,r){let s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(n),...t.skips.map(n).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let s=("string"==typeof e?e:"").split(/[\s,]+/),n=s.length;for(r=0;r<n;r++)s[r]&&("-"===(e=s[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,s;if("*"===e[e.length-1])return!0;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(5237),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},5240:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=r(6956):e.exports=r(8330)},8330:(e,t,r)=>{let s=r(3997),n=r(8354);t.init=function(e){e.inspectOpts={};let r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(...e){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){let{namespace:s,useColors:n}=this;if(n){let t=this.color,n="\x1b[3"+(t<8?t:"8;5;"+t),o=`  ${n};1m${s} \u001B[0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(n+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else r[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+s+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:s.isatty(process.stderr.fd)},t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=r(6055);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e},{}),e.exports=r(1183)(t);let{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},8408:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(s++,"%c"===e&&(n=s))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(7603)(t);let{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},7603:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,o;let i=null;function a(...e){if(!a.enabled)return;let s=Number(new Date),n=s-(r||s);a.diff=n,a.prev=r,a.curr=s,r=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,s)=>{if("%%"===r)return"%";o++;let n=t.formatters[s];if("function"==typeof n){let t=e[o];r=n.call(a,t),e.splice(o,1),o--}return r}),t.formatArgs.call(a,e),(a.log||t.log).apply(a,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(n!==t.namespaces&&(n=t.namespaces,o=t.enabled(e)),o),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,r){let s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(n),...t.skips.map(n).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let s=("string"==typeof e?e:"").split(/[\s,]+/),n=s.length;for(r=0;r<n;r++)s[r]&&("-"===(e=s[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,s;if("*"===e[e.length-1])return!0;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(5237),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},5284:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=r(8408):e.exports=r(9638)},9638:(e,t,r)=>{let s=r(3997),n=r(8354);t.init=function(e){e.inspectOpts={};let r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(...e){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){let{namespace:s,useColors:n}=this;if(n){let t=this.color,n="\x1b[3"+(t<8?t:"8;5;"+t),o=`  ${n};1m${s} \u001B[0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(n+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else r[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+s+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:s.isatty(process.stderr.fd)},t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=r(6055);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e},{}),e.exports=r(7603)(t);let{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},6055:(e,t,r)=>{"use strict";let s;let n=r(1820),o=r(3997),i=r(512),{env:a}=process;function l(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function c(e,t){if(0===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!t&&void 0===s)return 0;let r=s||0;if("dumb"===a.TERM)return r;if("win32"===process.platform){let e=n.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in a)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in a)||"codeship"===a.CI_NAME?1:r;if("TEAMCITY_VERSION"in a)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION)?1:0;if("truecolor"===a.COLORTERM)return 3;if("TERM_PROGRAM"in a){let e=parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(a.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)||"COLORTERM"in a?1:r}i("no-color")||i("no-colors")||i("color=false")||i("color=never")?s=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=1),"FORCE_COLOR"in a&&(s="true"===a.FORCE_COLOR?1:"false"===a.FORCE_COLOR?0:0===a.FORCE_COLOR.length?1:Math.min(parseInt(a.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return l(c(e,e&&e.isTTY))},stdout:l(c(!0,o.isatty(1))),stderr:l(c(!0,o.isatty(2)))}},9586:(e,t,r)=>{"use strict";let{EMPTY_BUFFER:s}=r(3230),n=Buffer[Symbol.species];function o(e,t,r,s,n){for(let o=0;o<n;o++)r[s+o]=e[o]^t[3&o]}function i(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(e.exports={concat:function(e,t){if(0===e.length)return s;if(1===e.length)return e[0];let r=Buffer.allocUnsafe(t),o=0;for(let t=0;t<e.length;t++){let s=e[t];r.set(s,o),o+=s.length}return o<t?new n(r.buffer,r.byteOffset,o):r},mask:o,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){let r;return(e.readOnly=!0,Buffer.isBuffer(t))?t:(t instanceof ArrayBuffer?r=new n(t):ArrayBuffer.isView(t)?r=new n(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r)},unmask:i},!process.env.WS_NO_BUFFER_UTIL)try{let t=r(9727);e.exports.mask=function(e,r,s,n,i){i<48?o(e,r,s,n,i):t.mask(e,r,s,n,i)},e.exports.unmask=function(e,r){e.length<32?i(e,r):t.unmask(e,r)}}catch(e){}},3230:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},7097:(e,t,r)=>{"use strict";let{kForOnEventAttribute:s,kListener:n}=r(3230),o=Symbol("kCode"),i=Symbol("kData"),a=Symbol("kError"),l=Symbol("kMessage"),c=Symbol("kReason"),h=Symbol("kTarget"),d=Symbol("kType"),u=Symbol("kWasClean");class p{constructor(e){this[h]=null,this[d]=e}get target(){return this[h]}get type(){return this[d]}}Object.defineProperty(p.prototype,"target",{enumerable:!0}),Object.defineProperty(p.prototype,"type",{enumerable:!0});class f extends p{constructor(e,t={}){super(e),this[o]=void 0===t.code?0:t.code,this[c]=void 0===t.reason?"":t.reason,this[u]=void 0!==t.wasClean&&t.wasClean}get code(){return this[o]}get reason(){return this[c]}get wasClean(){return this[u]}}Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});class m extends p{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[l]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[l]}}Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});class g extends p{constructor(e,t={}){super(e),this[i]=void 0===t.data?null:t.data}get data(){return this[i]}}function y(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}Object.defineProperty(g.prototype,"data",{enumerable:!0}),e.exports={CloseEvent:f,ErrorEvent:m,Event:p,EventTarget:{addEventListener(e,t,r={}){let o;for(let o of this.listeners(e))if(!r[s]&&o[n]===t&&!o[s])return;if("message"===e)o=function(e,r){let s=new g("message",{data:r?e:e.toString()});s[h]=this,y(t,this,s)};else if("close"===e)o=function(e,r){let s=new f("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});s[h]=this,y(t,this,s)};else if("error"===e)o=function(e){let r=new m("error",{error:e,message:e.message});r[h]=this,y(t,this,r)};else{if("open"!==e)return;o=function(){let e=new p("open");e[h]=this,y(t,this,e)}}o[s]=!!r[s],o[n]=t,r.once?this.once(e,o):this.on(e,o)},removeEventListener(e,t){for(let r of this.listeners(e))if(r[n]===t&&!r[s]){this.removeListener(e,r);break}}},MessageEvent:g}},182:(e,t,r)=>{"use strict";let{tokenChars:s}=r(7788);function n(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){let t,r;let o=Object.create(null),i=Object.create(null),a=!1,l=!1,c=!1,h=-1,d=-1,u=-1,p=0;for(;p<e.length;p++)if(d=e.charCodeAt(p),void 0===t){if(-1===u&&1===s[d])-1===h&&(h=p);else if(0!==p&&(32===d||9===d))-1===u&&-1!==h&&(u=p);else if(59===d||44===d){if(-1===h)throw SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p);let r=e.slice(h,u);44===d?(n(o,r,i),i=Object.create(null)):t=r,h=u=-1}else throw SyntaxError(`Unexpected character at index ${p}`)}else if(void 0===r){if(-1===u&&1===s[d])-1===h&&(h=p);else if(32===d||9===d)-1===u&&-1!==h&&(u=p);else if(59===d||44===d){if(-1===h)throw SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p),n(i,e.slice(h,u),!0),44===d&&(n(o,t,i),i=Object.create(null),t=void 0),h=u=-1}else if(61===d&&-1!==h&&-1===u)r=e.slice(h,p),h=u=-1;else throw SyntaxError(`Unexpected character at index ${p}`)}else if(l){if(1!==s[d])throw SyntaxError(`Unexpected character at index ${p}`);-1===h?h=p:a||(a=!0),l=!1}else if(c){if(1===s[d])-1===h&&(h=p);else if(34===d&&-1!==h)c=!1,u=p;else if(92===d)l=!0;else throw SyntaxError(`Unexpected character at index ${p}`)}else if(34===d&&61===e.charCodeAt(p-1))c=!0;else if(-1===u&&1===s[d])-1===h&&(h=p);else if(-1!==h&&(32===d||9===d))-1===u&&(u=p);else if(59===d||44===d){if(-1===h)throw SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p);let s=e.slice(h,u);a&&(s=s.replace(/\\/g,""),a=!1),n(i,r,s),44===d&&(n(o,t,i),i=Object.create(null),t=void 0),r=void 0,h=u=-1}else throw SyntaxError(`Unexpected character at index ${p}`);if(-1===h||c||32===d||9===d)throw SyntaxError("Unexpected end of input");-1===u&&(u=p);let f=e.slice(h,u);return void 0===t?n(o,f,i):(void 0===r?n(i,f,!0):a?n(i,r,f.replace(/\\/g,"")):n(i,r,f),n(o,t,i)),o}}},2399:e=>{"use strict";let t=Symbol("kDone"),r=Symbol("kRun");class s{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[t])}}}e.exports=s},2e3:(e,t,r)=>{"use strict";let s;let n=r(4075),o=r(9586),i=r(2399),{kStatusCode:a}=r(3230),l=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),h=Symbol("permessage-deflate"),d=Symbol("total-length"),u=Symbol("callback"),p=Symbol("buffers"),f=Symbol("error");class m{constructor(e,t,r){this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,s||(s=new i(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[u];this._deflate.close(),this._deflate=null,e&&e(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,r=e.find(e=>(!1!==t.serverNoContextTakeover||!e.server_no_context_takeover)&&(!e.server_max_window_bits||!1!==t.serverMaxWindowBits&&("number"!=typeof t.serverMaxWindowBits||!(t.serverMaxWindowBits>e.server_max_window_bits)))&&("number"!=typeof t.clientMaxWindowBits||!!e.client_max_window_bits));if(!r)throw Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:(!0===r.client_max_window_bits||!1===t.clientMaxWindowBits)&&delete r.client_max_window_bits,r}acceptAsClient(e){let t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let r=e[t];if(r.length>1)throw Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if("client_no_context_takeover"===t||"server_no_context_takeover"===t){if(!0!==r)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else throw Error(`Unknown parameter "${t}"`);e[t]=r})}),e}decompress(e,t,r){s.add(s=>{this._decompress(e,t,(e,t)=>{s(),r(e,t)})})}compress(e,t,r){s.add(s=>{this._compress(e,t,(e,t)=>{s(),r(e,t)})})}_decompress(e,t,r){let s=this._isServer?"client":"server";if(!this._inflate){let e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[h]=this,this._inflate[d]=0,this._inflate[p]=[],this._inflate.on("error",v),this._inflate.on("data",y)}this._inflate[u]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{let e=this._inflate[f];if(e){this._inflate.close(),this._inflate=null,r(e);return}let n=o.concat(this._inflate[p],this._inflate[d]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[d]=0,this._inflate[p]=[],t&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),r(null,n)})}_compress(e,t,r){let s=this._isServer?"server":"client";if(!this._deflate){let e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[d]=0,this._deflate[p]=[],this._deflate.on("data",g)}this._deflate[u]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=o.concat(this._deflate[p],this._deflate[d]);t&&(e=new l(e.buffer,e.byteOffset,e.length-4)),this._deflate[u]=null,this._deflate[d]=0,this._deflate[p]=[],t&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),r(null,e)})}}function g(e){this[p].push(e),this[d]+=e.length}function y(e){if(this[d]+=e.length,this[h]._maxPayload<1||this[d]<=this[h]._maxPayload){this[p].push(e);return}this[f]=RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][a]=1009,this.removeListener("data",y),this.reset()}function v(e){this[h]._inflate=null,e[a]=1007,this[u](e)}e.exports=m},1574:(e,t,r)=>{"use strict";let{Writable:s}=r(7910),n=r(2e3),{BINARY_TYPES:o,EMPTY_BUFFER:i,kStatusCode:a,kWebSocket:l}=r(3230),{concat:c,toArrayBuffer:h,unmask:d}=r(9586),{isValidStatusCode:u,isValidUTF8:p}=r(7788),f=Buffer[Symbol.species];class m extends s{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||o[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[l]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let t=this._buffers[0];return this._buffers[0]=new f(t.buffer,t.byteOffset+e,t.length-e),new f(t.buffer,t.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let r=this._buffers[0],s=t.length-e;e>=r.length?t.set(this._buffers.shift(),s):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),s),this._buffers[0]=new f(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if((48&t[0])!=0){e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));return}let r=(64&t[0])==64;if(r&&!this._extensions[n.extensionName]){e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(this._fin=(128&t[0])==128,this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r){e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(!this._fragmented){e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));return}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));return}this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin){e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));return}if(r){e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"));return}}else{e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));return}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&t[1])==128,this._isServer){if(!this._masked){e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"));return}}else if(this._masked){e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));return}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),r=t.readUInt32BE(0);if(r>2097151){e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"));return}this._payloadLength=0x100000000*r+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));return}this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(e){let t=i;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&d(t,this._mask)}if(this._opcode>7){this.controlMessage(t,e);return}if(this._compressed){this._state=5,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){this._extensions[n.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){t(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));return}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=0;return}let t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let s;s="nodebuffer"===this._binaryType?c(r,t):"arraybuffer"===this._binaryType?h(c(r,t)):r,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",s,!0),this._state=0,this.startLoop(e)}))}else{let s=c(r,t);if(!this._skipUTF8Validation&&!p(s)){e(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));return}5===this._state||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",s,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8===this._opcode){if(0===e.length)this._loop=!1,this.emit("conclude",1005,i),this.end();else{let r=e.readUInt16BE(0);if(!u(r)){t(this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));return}let s=new f(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!p(s)){t(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));return}this._loop=!1,this.emit("conclude",r,s),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}))}createError(e,t,r,s,n){this._loop=!1,this._errored=!0;let o=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,this.createError),o.code=n,o[a]=s,o}}e.exports=m},4242:(e,t,r)=>{"use strict";let s;let{Duplex:n}=r(7910),{randomFillSync:o}=r(5511),i=r(2e3),{EMPTY_BUFFER:a}=r(3230),{isValidStatusCode:l}=r(7788),{mask:c,toBuffer:h}=r(9586),d=Symbol("kByteLength"),u=Buffer.alloc(4),p=8192;class f{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let r,n;let i=!1,a=2,l=!1;t.mask&&(r=t.maskBuffer||u,t.generateMask?t.generateMask(r):(8192===p&&(void 0===s&&(s=Buffer.alloc(8192)),o(s,0,8192),p=0),r[0]=s[p++],r[1]=s[p++],r[2]=s[p++],r[3]=s[p++]),l=(r[0]|r[1]|r[2]|r[3])==0,a=6),"string"==typeof e?n=(!t.mask||l)&&void 0!==t[d]?t[d]:(e=Buffer.from(e)).length:(n=e.length,i=t.mask&&t.readOnly&&!l);let h=n;n>=65536?(a+=8,h=127):n>125&&(a+=2,h=126);let f=Buffer.allocUnsafe(i?n+a:a);return(f[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(f[0]|=64),f[1]=h,126===h?f.writeUInt16BE(n,2):127===h&&(f[2]=f[3]=0,f.writeUIntBE(n,4,6)),t.mask)?(f[1]|=128,f[a-4]=r[0],f[a-3]=r[1],f[a-2]=r[2],f[a-1]=r[3],l)?[f,e]:i?(c(e,r,f,a,n),[f]):(c(e,r,e,0,n),[f,e]):[f,e]}close(e,t,r,s){let n;if(void 0===e)n=a;else if("number"==typeof e&&l(e)){if(void 0!==t&&t.length){let r=Buffer.byteLength(t);if(r>123)throw RangeError("The message must not be greater than 123 bytes");(n=Buffer.allocUnsafe(2+r)).writeUInt16BE(e,0),"string"==typeof t?n.write(t,2):n.set(t,2)}else(n=Buffer.allocUnsafe(2)).writeUInt16BE(e,0)}else throw TypeError("First argument must be a valid error code number");let o={[d]:n.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,n,!1,o,s]):this.sendFrame(f.frame(n,o),s)}ping(e,t,r){let s,n;if("string"==typeof e?(s=Buffer.byteLength(e),n=!1):(s=(e=h(e)).length,n=h.readOnly),s>125)throw RangeError("The data size must not be greater than 125 bytes");let o={[d]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:n,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(f.frame(e,o),r)}pong(e,t,r){let s,n;if("string"==typeof e?(s=Buffer.byteLength(e),n=!1):(s=(e=h(e)).length,n=h.readOnly),s>125)throw RangeError("The data size must not be greater than 125 bytes");let o={[d]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:n,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(f.frame(e,o),r)}send(e,t,r){let s,n;let o=this._extensions[i.extensionName],a=t.binary?2:1,l=t.compress;if("string"==typeof e?(s=Buffer.byteLength(e),n=!1):(s=(e=h(e)).length,n=h.readOnly),this._firstFragment?(this._firstFragment=!1,l&&o&&o.params[o._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=s>=o._threshold),this._compress=l):(l=!1,a=0),t.fin&&(this._firstFragment=!0),o){let o={[d]:s,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:n,rsv1:l};this._deflating?this.enqueue([this.dispatch,e,this._compress,o,r]):this.dispatch(e,this._compress,o,r)}else this.sendFrame(f.frame(e,{[d]:s,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:n,rsv1:!1}),r)}dispatch(e,t,r,s){if(!t){this.sendFrame(f.frame(e,r),s);return}let n=this._extensions[i.extensionName];this._bufferedBytes+=r[d],this._deflating=!0,n.compress(e,r.fin,(e,t)=>{if(this._socket.destroyed){let e=Error("The socket was closed while data was being compressed");"function"==typeof s&&s(e);for(let t=0;t<this._queue.length;t++){let r=this._queue[t],s=r[r.length-1];"function"==typeof s&&s(e)}return}this._bufferedBytes-=r[d],this._deflating=!1,r.readOnly=!1,this.sendFrame(f.frame(t,r),s),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][d],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][d],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=f},1727:(e,t,r)=>{"use strict";let{Duplex:s}=r(7910);function n(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function i(e){this.removeListener("error",i),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0,a=new s({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,r){let s=!r&&a._readableState.objectMode?t.toString():t;a.push(s)||e.pause()}),e.once("error",function(e){a.destroyed||(r=!1,a.destroy(e))}),e.once("close",function(){a.destroyed||a.push(null)}),a._destroy=function(t,s){if(e.readyState===e.CLOSED){s(t),process.nextTick(n,a);return}let o=!1;e.once("error",function(e){o=!0,s(e)}),e.once("close",function(){o||s(t),process.nextTick(n,a)}),r&&e.terminate()},a._final=function(t){if(e.readyState===e.CONNECTING){e.once("open",function(){a._final(t)});return}null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",function(){t()}),e.close()))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,r,s){if(e.readyState===e.CONNECTING){e.once("open",function(){a._write(t,r,s)});return}e.send(t,s)},a.on("end",o),a.on("error",i),a}},3417:(e,t,r)=>{"use strict";let{tokenChars:s}=r(7788);e.exports={parse:function(e){let t=new Set,r=-1,n=-1,o=0;for(;o<e.length;o++){let i=e.charCodeAt(o);if(-1===n&&1===s[i])-1===r&&(r=o);else if(0!==o&&(32===i||9===i))-1===n&&-1!==r&&(n=o);else if(44===i){if(-1===r)throw SyntaxError(`Unexpected character at index ${o}`);-1===n&&(n=o);let s=e.slice(r,n);if(t.has(s))throw SyntaxError(`The "${s}" subprotocol is duplicated`);t.add(s),r=n=-1}else throw SyntaxError(`Unexpected character at index ${o}`)}if(-1===r||-1!==n)throw SyntaxError("Unexpected end of input");let i=e.slice(r,o);if(t.has(i))throw SyntaxError(`The "${i}" subprotocol is duplicated`);return t.add(i),t}}},7788:(e,t,r)=>{"use strict";let{isUtf8:s}=r(9428);function n(e){let t=e.length,r=0;for(;r<t;)if((128&e[r])==0)r++;else if((224&e[r])==192){if(r+1===t||(192&e[r+1])!=128||(254&e[r])==192)return!1;r+=2}else if((240&e[r])==224){if(r+2>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||224===e[r]&&(224&e[r+1])==128||237===e[r]&&(224&e[r+1])==160)return!1;r+=3}else{if((248&e[r])!=240||r+3>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||(192&e[r+3])!=128||240===e[r]&&(240&e[r+1])==128||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}if(e.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:n,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},s)e.exports.isValidUTF8=function(e){return e.length<24?n(e):s(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=r(7990);e.exports.isValidUTF8=function(e){return e.length<32?n(e):t(e)}}catch(e){}},7730:(e,t,r)=>{"use strict";let s=r(4735),n=r(1630),{Duplex:o}=r(7910),{createHash:i}=r(5511),a=r(182),l=r(2e3),c=r(3417),h=r(4400),{GUID:d,kWebSocket:u}=r(3230),p=/^[+/0-9A-Za-z]{22}==$/;class f extends s{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:h,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=n.createServer((e,t)=>{let r=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(let r of Object.keys(t))e.on(r,t[r]);return function(){for(let r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,s)=>{this.handleUpgrade(t,r,s,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state){e&&this.once("close",()=>{e(Error("The server is not running"))}),process.nextTick(m,this);return}if(e&&this.once("close",e),1!==this._state){if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(m,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{m(this)})}}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,s){t.on("error",g);let n=e.headers["sec-websocket-key"],o=e.headers.upgrade,i=+e.headers["sec-websocket-version"];if("GET"!==e.method){v(this,e,t,405,"Invalid HTTP method");return}if(void 0===o||"websocket"!==o.toLowerCase()){v(this,e,t,400,"Invalid Upgrade header");return}if(void 0===n||!p.test(n)){v(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(8!==i&&13!==i){v(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){y(t,400);return}let h=e.headers["sec-websocket-protocol"],d=new Set;if(void 0!==h)try{d=c.parse(h)}catch(r){v(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let u=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&void 0!==u){let r=new l(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let e=a.parse(u);e[l.extensionName]&&(r.accept(e[l.extensionName]),f[l.extensionName]=r)}catch(r){v(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let o={origin:e.headers[`${8===i?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(2===this.options.verifyClient.length){this.options.verifyClient(o,(o,i,a,l)=>{if(!o)return y(t,i||401,a,l);this.completeUpgrade(f,n,d,e,t,r,s)});return}if(!this.options.verifyClient(o))return y(t,401)}this.completeUpgrade(f,n,d,e,t,r,s)}completeUpgrade(e,t,r,s,n,o,c){if(!n.readable||!n.writable)return n.destroy();if(n[u])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return y(n,503);let h=i("sha1").update(t+d).digest("base64"),p=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${h}`],f=new this.options.WebSocket(null,void 0,this.options);if(r.size){let e=this.options.handleProtocols?this.options.handleProtocols(r,s):r.values().next().value;e&&(p.push(`Sec-WebSocket-Protocol: ${e}`),f._protocol=e)}if(e[l.extensionName]){let t=e[l.extensionName].params,r=a.format({[l.extensionName]:[t]});p.push(`Sec-WebSocket-Extensions: ${r}`),f._extensions=e}this.emit("headers",p,s),n.write(p.concat("\r\n").join("\r\n")),n.removeListener("error",g),f.setSocket(n,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(m,this)})),c(f,s)}}function m(e){e._state=2,e.emit("close")}function g(){this.destroy()}function y(e,t,r,s){r=r||n.STATUS_CODES[t],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...s},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r
`+Object.keys(s).map(e=>`${e}: ${s[e]}`).join("\r\n")+"\r\n\r\n"+r)}function v(e,t,r,s,n){if(e.listenerCount("wsClientError")){let s=Error(n);Error.captureStackTrace(s,v),e.emit("wsClientError",s,r,t)}else y(r,s,n)}e.exports=f},4400:(e,t,r)=>{"use strict";let s=r(4735),n=r(5591),o=r(1630),i=r(1645),a=r(4631),{randomBytes:l,createHash:c}=r(5511),{Duplex:h,Readable:d}=r(7910),{URL:u}=r(9551),p=r(2e3),f=r(1574),m=r(4242),{BINARY_TYPES:g,EMPTY_BUFFER:y,GUID:v,kForOnEventAttribute:b,kListener:_,kStatusCode:w,kWebSocket:x,NOOP:C}=r(3230),{EventTarget:{addEventListener:S,removeEventListener:E}}=r(7097),{format:k,parse:T}=r(182),{toBuffer:O}=r(9586),R=Symbol("kAborted"),N=[8,13],A=["CONNECTING","OPEN","CLOSING","CLOSED"],j=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class F extends s{constructor(e,t,r){super(),this._binaryType=g[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=y,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=F.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),function e(t,r,s,i){let a,h,d,f;let m={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:N[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=m.autoPong,!N.includes(m.protocolVersion))throw RangeError(`Unsupported protocol version: ${m.protocolVersion} (supported versions: ${N.join(", ")})`);if(r instanceof u)a=r;else try{a=new u(r)}catch(e){throw SyntaxError(`Invalid URL: ${r}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),t._url=a.href;let g="wss:"===a.protocol,y="ws+unix:"===a.protocol;if("ws:"===a.protocol||g||y?y&&!a.pathname?h="The URL's pathname is empty":a.hash&&(h="The URL contains a fragment identifier"):h='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',h){let e=SyntaxError(h);if(0===t._redirects)throw e;L(t,e);return}let b=g?443:80,_=l(16).toString("base64"),w=g?n.request:o.request,x=new Set;if(m.createConnection=m.createConnection||(g?D:P),m.defaultPort=m.defaultPort||b,m.port=a.port||b,m.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,m.headers={...m.headers,"Sec-WebSocket-Version":m.protocolVersion,"Sec-WebSocket-Key":_,Connection:"Upgrade",Upgrade:"websocket"},m.path=a.pathname+a.search,m.timeout=m.handshakeTimeout,m.perMessageDeflate&&(d=new p(!0!==m.perMessageDeflate?m.perMessageDeflate:{},!1,m.maxPayload),m.headers["Sec-WebSocket-Extensions"]=k({[p.extensionName]:d.offer()})),s.length){for(let e of s){if("string"!=typeof e||!j.test(e)||x.has(e))throw SyntaxError("An invalid or duplicated subprotocol was specified");x.add(e)}m.headers["Sec-WebSocket-Protocol"]=s.join(",")}if(m.origin&&(m.protocolVersion<13?m.headers["Sec-WebSocket-Origin"]=m.origin:m.headers.Origin=m.origin),(a.username||a.password)&&(m.auth=`${a.username}:${a.password}`),y){let e=m.path.split(":");m.socketPath=e[0],m.path=e[1]}if(m.followRedirects){if(0===t._redirects){t._originalIpc=y,t._originalSecure=g,t._originalHostOrSocketPath=y?m.socketPath:a.host;let e=i&&i.headers;if(i={...i,headers:{}},e)for(let[t,r]of Object.entries(e))i.headers[t.toLowerCase()]=r}else if(0===t.listenerCount("redirect")){let e=y?!!t._originalIpc&&m.socketPath===t._originalHostOrSocketPath:!t._originalIpc&&a.host===t._originalHostOrSocketPath;e&&(!t._originalSecure||g)||(delete m.headers.authorization,delete m.headers.cookie,e||delete m.headers.host,m.auth=void 0)}m.auth&&!i.headers.authorization&&(i.headers.authorization="Basic "+Buffer.from(m.auth).toString("base64")),f=t._req=w(m),t._redirects&&t.emit("redirect",t.url,f)}else f=t._req=w(m);m.timeout&&f.on("timeout",()=>{I(t,f,"Opening handshake has timed out")}),f.on("error",e=>{null===f||f[R]||(f=t._req=null,L(t,e))}),f.on("response",n=>{let o=n.headers.location,a=n.statusCode;if(o&&m.followRedirects&&a>=300&&a<400){let n;if(++t._redirects>m.maxRedirects){I(t,f,"Maximum redirects exceeded");return}f.abort();try{n=new u(o,r)}catch(e){L(t,SyntaxError(`Invalid URL: ${o}`));return}e(t,n,s,i)}else t.emit("unexpected-response",f,n)||I(t,f,`Unexpected server response: ${n.statusCode}`)}),f.on("upgrade",(e,r,s)=>{let n;if(t.emit("upgrade",e),t.readyState!==F.CONNECTING)return;f=t._req=null;let o=e.headers.upgrade;if(void 0===o||"websocket"!==o.toLowerCase()){I(t,r,"Invalid Upgrade header");return}let i=c("sha1").update(_+v).digest("base64");if(e.headers["sec-websocket-accept"]!==i){I(t,r,"Invalid Sec-WebSocket-Accept header");return}let a=e.headers["sec-websocket-protocol"];if(void 0!==a?x.size?x.has(a)||(n="Server sent an invalid subprotocol"):n="Server sent a subprotocol but none was requested":x.size&&(n="Server sent no subprotocol"),n){I(t,r,n);return}a&&(t._protocol=a);let l=e.headers["sec-websocket-extensions"];if(void 0!==l){let e;if(!d){I(t,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}try{e=T(l)}catch(e){I(t,r,"Invalid Sec-WebSocket-Extensions header");return}let s=Object.keys(e);if(1!==s.length||s[0]!==p.extensionName){I(t,r,"Server indicated an extension that was not requested");return}try{d.accept(e[p.extensionName])}catch(e){I(t,r,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[p.extensionName]=d}t.setSocket(r,s,{allowSynchronousEvents:m.allowSynchronousEvents,generateMask:m.generateMask,maxPayload:m.maxPayload,skipUTF8Validation:m.skipUTF8Validation})}),m.finishRequest?m.finishRequest(f,t):f.end()}(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){g.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){let s=new f({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new m(e,this._extensions,r.generateMask),this._receiver=s,this._socket=e,s[x]=this,e[x]=this,s.on("conclude",M),s.on("drain",U),s.on("error",q),s.on("message",W),s.on("ping",H),s.on("pong",V),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",G),e.on("data",X),e.on("end",Y),e.on("error",K),this._readyState=F.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=F.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[p.extensionName]&&this._extensions[p.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=F.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==F.CLOSED){if(this.readyState===F.CONNECTING){I(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===F.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=F.CLOSING,this._sender.close(e,t,!this._isServer,e=>{!e&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)}}pause(){this.readyState!==F.CONNECTING&&this.readyState!==F.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===F.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==F.OPEN){B(this,e,r);return}void 0===t&&(t=!this._isServer),this._sender.ping(e||y,t,r)}pong(e,t,r){if(this.readyState===F.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==F.OPEN){B(this,e,r);return}void 0===t&&(t=!this._isServer),this._sender.pong(e||y,t,r)}resume(){this.readyState!==F.CONNECTING&&this.readyState!==F.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===F.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==F.OPEN){B(this,e,r);return}let s={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[p.extensionName]||(s.compress=!1),this._sender.send(e||y,s,r)}terminate(){if(this.readyState!==F.CLOSED){if(this.readyState===F.CONNECTING){I(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=F.CLOSING,this._socket.destroy())}}}function L(e,t){e._readyState=F.CLOSING,e.emit("error",t),e.emitClose()}function P(e){return e.path=e.socketPath,i.connect(e)}function D(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=i.isIP(e.host)?"":e.host),a.connect(e)}function I(e,t,r){e._readyState=F.CLOSING;let s=Error(r);Error.captureStackTrace(s,I),t.setHeader?(t[R]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(L,e,s)):(t.destroy(s),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function B(e,t,r){if(t){let r=O(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){let t=Error(`WebSocket is not open: readyState ${e.readyState} (${A[e.readyState]})`);process.nextTick(r,t)}}function M(e,t){let r=this[x];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[x]&&(r._socket.removeListener("data",X),process.nextTick(z,r._socket),1005===e?r.close():r.close(e,t))}function U(){let e=this[x];e.isPaused||e._socket.resume()}function q(e){let t=this[x];void 0!==t._socket[x]&&(t._socket.removeListener("data",X),process.nextTick(z,t._socket),t.close(e[w])),t.emit("error",e)}function $(){this[x].emitClose()}function W(e,t){this[x].emit("message",e,t)}function H(e){let t=this[x];t._autoPong&&t.pong(e,!this._isServer,C),t.emit("ping",e)}function V(e){this[x].emit("pong",e)}function z(e){e.resume()}function G(){let e;let t=this[x];this.removeListener("close",G),this.removeListener("data",X),this.removeListener("end",Y),t._readyState=F.CLOSING,this._readableState.endEmitted||t._closeFrameReceived||t._receiver._writableState.errorEmitted||null===(e=t._socket.read())||t._receiver.write(e),t._receiver.end(),this[x]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",$),t._receiver.on("finish",$))}function X(e){this[x]._receiver.write(e)||this.pause()}function Y(){let e=this[x];e._readyState=F.CLOSING,e._receiver.end(),this.end()}function K(){let e=this[x];this.removeListener("error",K),this.on("error",C),e&&(e._readyState=F.CLOSING,this.destroy())}Object.defineProperty(F,"CONNECTING",{enumerable:!0,value:A.indexOf("CONNECTING")}),Object.defineProperty(F.prototype,"CONNECTING",{enumerable:!0,value:A.indexOf("CONNECTING")}),Object.defineProperty(F,"OPEN",{enumerable:!0,value:A.indexOf("OPEN")}),Object.defineProperty(F.prototype,"OPEN",{enumerable:!0,value:A.indexOf("OPEN")}),Object.defineProperty(F,"CLOSING",{enumerable:!0,value:A.indexOf("CLOSING")}),Object.defineProperty(F.prototype,"CLOSING",{enumerable:!0,value:A.indexOf("CLOSING")}),Object.defineProperty(F,"CLOSED",{enumerable:!0,value:A.indexOf("CLOSED")}),Object.defineProperty(F.prototype,"CLOSED",{enumerable:!0,value:A.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(F.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(F.prototype,`on${e}`,{enumerable:!0,get(){for(let t of this.listeners(e))if(t[b])return t[_];return null},set(t){for(let t of this.listeners(e))if(t[b]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[b]:!0})}})}),F.prototype.addEventListener=S,F.prototype.removeEventListener=E,e.exports=F},9892:(e,t,r)=>{var s=r(9021),n=r(9551),o=r(9646).spawn;function i(e){"use strict";e=e||{};var t,i,a=this,l=r(1630),c=r(5591),h={},d=!1,u={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},p=Object.assign({},u),f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],m=["TRACE","TRACK","CONNECT"],g=!1,y=!1,v=!1,b={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null,this.open=function(e,t,r,s,n){if(this.abort(),y=!1,v=!1,!(e&&-1===m.indexOf(e)))throw Error("SecurityError: Request method not allowed");h={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:s||null,password:n||null},_(this.OPENED)},this.setDisableHeaderCheck=function(e){d=e},this.setRequestHeader=function(e,t){if(this.readyState!=this.OPENED)throw Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!d&&(!e||-1!==f.indexOf(e.toLowerCase())))return console.warn('Refused to set unsafe header "'+e+'"'),!1;if(g)throw Error("INVALID_STATE_ERR: send flag is true");return p[e]=t,!0},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&i.headers[e.toLowerCase()]&&!y?i.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||y)return"";var e="";for(var t in i.headers)"set-cookie"!==t&&"set-cookie2"!==t&&(e+=t+": "+i.headers[t]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&p[e]?p[e]:""},this.send=function(r){if(this.readyState!=this.OPENED)throw Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(g)throw Error("INVALID_STATE_ERR: send has already been called");var d,u=!1,f=!1,m=n.parse(h.url);switch(m.protocol){case"https:":u=!0;case"http:":d=m.hostname;break;case"file:":f=!0;break;case void 0:case"":d="localhost";break;default:throw Error("Protocol not supported.")}if(f){if("GET"!==h.method)throw Error("XMLHttpRequest: Only GET method is supported");if(h.async)s.readFile(unescape(m.pathname),function(e,t){e?a.handleError(e,e.errno||-1):(a.status=200,a.responseText=t.toString("utf8"),a.response=t,_(a.DONE))});else try{this.response=s.readFileSync(unescape(m.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,_(a.DONE)}catch(e){this.handleError(e,e.errno||-1)}return}var v=m.port||(u?443:80),b=m.pathname+(m.search?m.search:"");if(p.Host=d,u&&443===v||80===v||(p.Host+=":"+m.port),h.user){void 0===h.password&&(h.password="");var w=new Buffer(h.user+":"+h.password);p.Authorization="Basic "+w.toString("base64")}"GET"===h.method||"HEAD"===h.method?r=null:r?(p["Content-Length"]=Buffer.isBuffer(r)?r.length:Buffer.byteLength(r),Object.keys(p).some(function(e){return"content-type"===e.toLowerCase()})||(p["Content-Type"]="text/plain;charset=UTF-8")):"POST"===h.method&&(p["Content-Length"]=0);var x=e.agent||!1,C={host:d,port:v,path:b,method:h.method,headers:p,agent:x};if(u&&(C.pfx=e.pfx,C.key=e.key,C.passphrase=e.passphrase,C.cert=e.cert,C.ca=e.ca,C.ciphers=e.ciphers,C.rejectUnauthorized=!1!==e.rejectUnauthorized),y=!1,h.async){var S=u?c.request:l.request;g=!0,a.dispatchEvent("readystatechange");var E=function(r){if(302===(i=r).statusCode||303===i.statusCode||307===i.statusCode){h.url=i.headers.location;var s=n.parse(h.url);d=s.hostname;var o={hostname:s.hostname,port:s.port,path:s.path,method:303===i.statusCode?"GET":h.method,headers:p};u&&(o.pfx=e.pfx,o.key=e.key,o.passphrase=e.passphrase,o.cert=e.cert,o.ca=e.ca,o.ciphers=e.ciphers,o.rejectUnauthorized=!1!==e.rejectUnauthorized),(t=S(o,E).on("error",k)).end();return}_(a.HEADERS_RECEIVED),a.status=i.statusCode,i.on("data",function(e){if(e){var t=Buffer.from(e);a.response=Buffer.concat([a.response,t])}g&&_(a.LOADING)}),i.on("end",function(){g&&(g=!1,_(a.DONE),a.responseText=a.response.toString("utf8"))}),i.on("error",function(e){a.handleError(e)})},k=function(e){if(t.reusedSocket&&"ECONNRESET"===e.code)return S(C,E).on("error",k);a.handleError(e)};t=S(C,E).on("error",k),e.autoUnref&&t.on("socket",e=>{e.unref()}),r&&t.write(r),t.end(),a.dispatchEvent("loadstart")}else{var T=".node-xmlhttprequest-content-"+process.pid,O=".node-xmlhttprequest-sync-"+process.pid;s.writeFileSync(O,"","utf8");for(var R="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(u?"s":"")+".request;var options = "+JSON.stringify(C)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+T+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+O+"');});response.on('error', function(error) {fs.writeFileSync('"+T+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+O+"');});}).on('error', function(error) {fs.writeFileSync('"+T+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+O+"');});"+(r?"req.write('"+JSON.stringify(r).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",N=o(process.argv[0],["-e",R]);s.existsSync(O););if(a.responseText=s.readFileSync(T,"utf8"),N.stdin.end(),s.unlinkSync(T),a.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var A=JSON.parse(a.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));a.handleError(A,503)}else{a.status=a.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var j=JSON.parse(a.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));i={statusCode:a.status,headers:j.data.headers},a.responseText=j.data.text,a.response=Buffer.from(j.data.data,"base64"),_(a.DONE,!0)}}},this.handleError=function(e,t){this.status=t||0,this.statusText=e,this.responseText=e.stack,y=!0,_(this.DONE)},this.abort=function(){t&&(t.abort(),t=null),p=Object.assign({},u),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),y=v=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||g)&&this.readyState!==this.DONE&&(g=!1,_(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(e,t){e in b||(b[e]=[]),b[e].push(t)},this.removeEventListener=function(e,t){e in b&&(b[e]=b[e].filter(function(e){return e!==t}))},this.dispatchEvent=function(e){if("function"==typeof a["on"+e]&&(this.readyState===this.DONE&&h.async?setTimeout(function(){a["on"+e]()},0):a["on"+e]()),e in b)for(let t=0,r=b[e].length;t<r;t++)this.readyState===this.DONE?setTimeout(function(){b[e][t].call(a)},0):b[e][t].call(a)};var _=function(e){if(a.readyState!==e&&(a.readyState!==a.UNSENT||!v)&&(a.readyState=e,(h.async||a.readyState<a.OPENED||a.readyState===a.DONE)&&a.dispatchEvent("readystatechange"),a.readyState===a.DONE)){let e;e=v?"abort":y?"error":"load",a.dispatchEvent(e),a.dispatchEvent("loadend")}}}e.exports=i,i.XMLHttpRequest=i},6182:(e,t,r)=>{"use strict";let s,n;r.r(t),r.d(t,{default:()=>no});var o,i={};r.r(i),r.d(i,{Decoder:()=>tp,Encoder:()=>td,PacketType:()=>o,protocol:()=>th});var a=r(5512),l=r(8009),c=r(9334),h=r(9400),d=r(4590),u=r(5249),p=r(4716),f=r(9230),m=r(1877),g=r(4097),y=r(7722),v=r(830),b=r(8060),_=r(6004),w=r(9952),x=r(2828),C=l.createContext(void 0);function S(e){let t=l.useContext(C);return e||t||"ltr"}var E=r(9397);function k(e,[t,r]){return Math.min(r,Math.max(t,e))}var T=r(1412),O="ScrollArea",[R,N]=(0,_.A)(O),[A,j]=R(O),F=l.forwardRef((e,t)=>{let{__scopeScrollArea:r,type:s="hover",dir:n,scrollHideDelay:o=600,...i}=e,[c,h]=l.useState(null),[d,u]=l.useState(null),[p,f]=l.useState(null),[m,g]=l.useState(null),[y,b]=l.useState(null),[_,x]=l.useState(0),[C,E]=l.useState(0),[k,T]=l.useState(!1),[O,R]=l.useState(!1),N=(0,w.s)(t,e=>h(e)),j=S(n);return(0,a.jsx)(A,{scope:r,type:s,dir:j,scrollHideDelay:o,scrollArea:c,viewport:d,onViewportChange:u,content:p,onContentChange:f,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:k,onScrollbarXEnabledChange:T,scrollbarY:y,onScrollbarYChange:b,scrollbarYEnabled:O,onScrollbarYEnabledChange:R,onCornerWidthChange:x,onCornerHeightChange:E,children:(0,a.jsx)(v.sG.div,{dir:j,...i,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});F.displayName=O;var L="ScrollAreaViewport",P=l.forwardRef((e,t)=>{let{__scopeScrollArea:r,children:s,nonce:n,...o}=e,i=j(L,r),c=l.useRef(null),h=(0,w.s)(t,c,i.onViewportChange);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,a.jsx)(v.sG.div,{"data-radix-scroll-area-viewport":"",...o,ref:h,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,a.jsx)("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});P.displayName=L;var D="ScrollAreaScrollbar",I=l.forwardRef((e,t)=>{let{forceMount:r,...s}=e,n=j(D,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=n,c="horizontal"===e.orientation;return l.useEffect(()=>(c?o(!0):i(!0),()=>{c?o(!1):i(!1)}),[c,o,i]),"hover"===n.type?(0,a.jsx)(B,{...s,ref:t,forceMount:r}):"scroll"===n.type?(0,a.jsx)(M,{...s,ref:t,forceMount:r}):"auto"===n.type?(0,a.jsx)(U,{...s,ref:t,forceMount:r}):"always"===n.type?(0,a.jsx)(q,{...s,ref:t}):null});I.displayName=D;var B=l.forwardRef((e,t)=>{let{forceMount:r,...s}=e,n=j(D,e.__scopeScrollArea),[o,i]=l.useState(!1);return l.useEffect(()=>{let e=n.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),i(!0)},s=()=>{t=window.setTimeout(()=>i(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",s),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",s)}}},[n.scrollArea,n.scrollHideDelay]),(0,a.jsx)(b.C,{present:r||o,children:(0,a.jsx)(U,{"data-state":o?"visible":"hidden",...s,ref:t})})}),M=l.forwardRef((e,t)=>{var r,s;let{forceMount:n,...o}=e,i=j(D,e.__scopeScrollArea),c="horizontal"===e.orientation,h=eo(()=>u("SCROLL_END"),100),[d,u]=(r="hidden",s={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},l.useReducer((e,t)=>s[e][t]??e,r));return l.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,i.scrollHideDelay,u]),l.useEffect(()=>{let e=i.viewport,t=c?"scrollLeft":"scrollTop";if(e){let r=e[t],s=()=>{let s=e[t];r!==s&&(u("SCROLL"),h()),r=s};return e.addEventListener("scroll",s),()=>e.removeEventListener("scroll",s)}},[i.viewport,c,u,h]),(0,a.jsx)(b.C,{present:n||"hidden"!==d,children:(0,a.jsx)(q,{"data-state":"hidden"===d?"hidden":"visible",...o,ref:t,onPointerEnter:(0,T.m)(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:(0,T.m)(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),U=l.forwardRef((e,t)=>{let r=j(D,e.__scopeScrollArea),{forceMount:s,...n}=e,[o,i]=l.useState(!1),c="horizontal"===e.orientation,h=eo(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;i(c?e:t)}},10);return ei(r.viewport,h),ei(r.content,h),(0,a.jsx)(b.C,{present:s||o,children:(0,a.jsx)(q,{"data-state":o?"visible":"hidden",...n,ref:t})})}),q=l.forwardRef((e,t)=>{let{orientation:r="vertical",...s}=e,n=j(D,e.__scopeScrollArea),o=l.useRef(null),i=l.useRef(0),[c,h]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=ee(c.viewport,c.content),u={...s,sizes:c,onSizesChange:h,hasThumb:!!(d>0&&d<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:e=>i.current=e};function p(e,t){return function(e,t,r,s="ltr"){let n=et(r),o=t||n/2,i=r.scrollbar.paddingStart+o,a=r.scrollbar.size-r.scrollbar.paddingEnd-(n-o),l=r.content-r.viewport;return es([i,a],"ltr"===s?[0,l]:[-1*l,0])(e)}(e,i.current,c,t)}return"horizontal"===r?(0,a.jsx)($,{...u,ref:t,onThumbPositionChange:()=>{if(n.viewport&&o.current){let e=er(n.viewport.scrollLeft,c,n.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=p(e,n.dir))}}):"vertical"===r?(0,a.jsx)(W,{...u,ref:t,onThumbPositionChange:()=>{if(n.viewport&&o.current){let e=er(n.viewport.scrollTop,c);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=p(e))}}):null}),$=l.forwardRef((e,t)=>{let{sizes:r,onSizesChange:s,...n}=e,o=j(D,e.__scopeScrollArea),[i,c]=l.useState(),h=l.useRef(null),d=(0,w.s)(t,h,o.onScrollbarXChange);return l.useEffect(()=>{h.current&&c(getComputedStyle(h.current))},[h]),(0,a.jsx)(z,{"data-orientation":"horizontal",...n,ref:d,sizes:r,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":et(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(o.viewport){let s=o.viewport.scrollLeft+t.deltaX;e.onWheelScroll(s),function(e,t){return e>0&&e<t}(s,r)&&t.preventDefault()}},onResize:()=>{h.current&&o.viewport&&i&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Q(i.paddingLeft),paddingEnd:Q(i.paddingRight)}})}})}),W=l.forwardRef((e,t)=>{let{sizes:r,onSizesChange:s,...n}=e,o=j(D,e.__scopeScrollArea),[i,c]=l.useState(),h=l.useRef(null),d=(0,w.s)(t,h,o.onScrollbarYChange);return l.useEffect(()=>{h.current&&c(getComputedStyle(h.current))},[h]),(0,a.jsx)(z,{"data-orientation":"vertical",...n,ref:d,sizes:r,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":et(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(o.viewport){let s=o.viewport.scrollTop+t.deltaY;e.onWheelScroll(s),function(e,t){return e>0&&e<t}(s,r)&&t.preventDefault()}},onResize:()=>{h.current&&o.viewport&&i&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Q(i.paddingTop),paddingEnd:Q(i.paddingBottom)}})}})}),[H,V]=R(D),z=l.forwardRef((e,t)=>{let{__scopeScrollArea:r,sizes:s,hasThumb:n,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:c,onThumbPositionChange:h,onDragScroll:d,onWheelScroll:u,onResize:p,...f}=e,m=j(D,r),[g,y]=l.useState(null),b=(0,w.s)(t,e=>y(e)),_=l.useRef(null),C=l.useRef(""),S=m.viewport,E=s.content-s.viewport,k=(0,x.c)(u),O=(0,x.c)(h),R=eo(p,10);function N(e){_.current&&d({x:e.clientX-_.current.left,y:e.clientY-_.current.top})}return l.useEffect(()=>{let e=e=>{let t=e.target;g?.contains(t)&&k(e,E)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[S,g,E,k]),l.useEffect(O,[s,O]),ei(g,R),ei(m.content,R),(0,a.jsx)(H,{scope:r,scrollbar:g,hasThumb:n,onThumbChange:(0,x.c)(o),onThumbPointerUp:(0,x.c)(i),onThumbPositionChange:O,onThumbPointerDown:(0,x.c)(c),children:(0,a.jsx)(v.sG.div,{...f,ref:b,style:{position:"absolute",...f.style},onPointerDown:(0,T.m)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),_.current=g.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),N(e))}),onPointerMove:(0,T.m)(e.onPointerMove,N),onPointerUp:(0,T.m)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=C.current,m.viewport&&(m.viewport.style.scrollBehavior=""),_.current=null})})})}),G="ScrollAreaThumb",X=l.forwardRef((e,t)=>{let{forceMount:r,...s}=e,n=V(G,e.__scopeScrollArea);return(0,a.jsx)(b.C,{present:r||n.hasThumb,children:(0,a.jsx)(Y,{ref:t,...s})})}),Y=l.forwardRef((e,t)=>{let{__scopeScrollArea:r,style:s,...n}=e,o=j(G,r),i=V(G,r),{onThumbPositionChange:c}=i,h=(0,w.s)(t,e=>i.onThumbChange(e)),d=l.useRef(void 0),u=eo(()=>{d.current&&(d.current(),d.current=void 0)},100);return l.useEffect(()=>{let e=o.viewport;if(e){let t=()=>{if(u(),!d.current){let t=en(e,c);d.current=t,c()}};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[o.viewport,u,c]),(0,a.jsx)(v.sG.div,{"data-state":i.hasThumb?"visible":"hidden",...n,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:(0,T.m)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,s=e.clientY-t.top;i.onThumbPointerDown({x:r,y:s})}),onPointerUp:(0,T.m)(e.onPointerUp,i.onThumbPointerUp)})});X.displayName=G;var K="ScrollAreaCorner",J=l.forwardRef((e,t)=>{let r=j(K,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&s?(0,a.jsx)(Z,{...e,ref:t}):null});J.displayName=K;var Z=l.forwardRef((e,t)=>{let{__scopeScrollArea:r,...s}=e,n=j(K,r),[o,i]=l.useState(0),[c,h]=l.useState(0),d=!!(o&&c);return ei(n.scrollbarX,()=>{let e=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(e),h(e)}),ei(n.scrollbarY,()=>{let e=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(e),i(e)}),d?(0,a.jsx)(v.sG.div,{...s,ref:t,style:{width:o,height:c,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null});function Q(e){return e?parseInt(e,10):0}function ee(e,t){let r=e/t;return isNaN(r)?0:r}function et(e){let t=ee(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function er(e,t,r="ltr"){let s=et(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-n,i=t.content-t.viewport,a=k(e,"ltr"===r?[0,i]:[-1*i,0]);return es([0,i],[0,o-s])(a)}function es(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}var en=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function n(){let o={left:e.scrollLeft,top:e.scrollTop},i=r.left!==o.left,a=r.top!==o.top;(i||a)&&t(),r=o,s=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(s)};function eo(e,t){let r=(0,x.c)(e),s=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(s.current),[]),l.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function ei(e,t){let r=(0,x.c)(t);(0,E.N)(()=>{let t=0;if(e){let s=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(t),s.unobserve(e)}}},[e,r])}var ea=r(4195);let el=l.forwardRef(({className:e,children:t,...r},s)=>(0,a.jsxs)(F,{ref:s,className:(0,ea.cn)("relative overflow-hidden",e),...r,children:[(0,a.jsx)(P,{className:"h-full w-full rounded-[inherit]",children:t}),(0,a.jsx)(ec,{}),(0,a.jsx)(J,{})]}));el.displayName=F.displayName;let ec=l.forwardRef(({className:e,orientation:t="vertical",...r},s)=>(0,a.jsx)(I,{ref:s,orientation:t,className:(0,ea.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 border-t border-t-transparent p-[1px]",e),...r,children:(0,a.jsx)(X,{className:"relative flex-1 rounded-full bg-border"})}));ec.displayName=I.displayName;var eh=r(9892),ed=r.t(eh,2);let eu=Object.create(null);eu.open="0",eu.close="1",eu.ping="2",eu.pong="3",eu.message="4",eu.upgrade="5",eu.noop="6";let ep=Object.create(null);Object.keys(eu).forEach(e=>{ep[eu[e]]=e});let ef={type:"error",data:"parser error"},em=({type:e,data:t},r,s)=>s(t instanceof ArrayBuffer||ArrayBuffer.isView(t)?r?t:"b"+eg(t,!0).toString("base64"):eu[e]+(t||"")),eg=(e,t)=>Buffer.isBuffer(e)||e instanceof Uint8Array&&!t?e:e instanceof ArrayBuffer?Buffer.from(e):Buffer.from(e.buffer,e.byteOffset,e.byteLength),ey=(e,t)=>{if("string"!=typeof e)return{type:"message",data:ev(e,t)};let r=e.charAt(0);return"b"===r?{type:"message",data:ev(Buffer.from(e.substring(1),"base64"),t)}:ep[r]?e.length>1?{type:ep[r],data:e.substring(1)}:{type:ep[r]}:ef},ev=(e,t)=>"arraybuffer"===t?e instanceof ArrayBuffer?e:Buffer.isBuffer(e)?e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength):e.buffer:Buffer.isBuffer(e)?e:Buffer.from(e),eb=(e,t)=>{let r=e.length,s=Array(r),n=0;e.forEach((e,o)=>{em(e,!1,e=>{s[o]=e,++n===r&&t(s.join("\x1e"))})})},e_=(e,t)=>{let r=e.split("\x1e"),s=[];for(let e=0;e<r.length;e++){let n=ey(r[e],t);if(s.push(n),"error"===n.type)break}return s};function ew(e){return e.reduce((e,t)=>e+t.length,0)}function ex(e,t){if(e[0].length===t)return e.shift();let r=new Uint8Array(t),s=0;for(let n=0;n<t;n++)r[n]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function eC(e){if(e)return function(e){for(var t in eC.prototype)e[t]=eC.prototype[t];return e}(e)}eC.prototype.on=eC.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},eC.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},eC.prototype.off=eC.prototype.removeListener=eC.prototype.removeAllListeners=eC.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<s.length;n++)if((r=s[n])===t||r.fn===t){s.splice(n,1);break}return 0===s.length&&delete this._callbacks["$"+e],this},eC.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,n=r.length;s<n;++s)r[s].apply(this,t)}return this},eC.prototype.emitReserved=eC.prototype.emit,eC.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},eC.prototype.hasListeners=function(e){return!!this.listeners(e).length};let eS=process.nextTick,eE=global;class ek{constructor(){this._cookies=new Map}parseCookies(e){e&&e.forEach(e=>{let t=function(e){let t=e.split("; "),r=t[0].indexOf("=");if(-1===r)return;let s=t[0].substring(0,r).trim();if(!s.length)return;let n=t[0].substring(r+1).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));let o={name:s,value:n};for(let e=1;e<t.length;e++){let r=t[e].split("=");if(2!==r.length)continue;let s=r[0].trim(),n=r[1].trim();switch(s){case"Expires":o.expires=new Date(n);break;case"Max-Age":let i=new Date;i.setUTCSeconds(i.getUTCSeconds()+parseInt(n,10)),o.expires=i}}return o}(e);t&&this._cookies.set(t.name,t)})}get cookies(){let e=Date.now();return this._cookies.forEach((t,r)=>{var s;(null===(s=t.expires)||void 0===s?void 0:s.getTime())<e&&this._cookies.delete(r)}),this._cookies.entries()}addCookies(e){let t=[];for(let[e,r]of this.cookies)t.push(`${e}=${r.value}`);t.length&&(e.setDisableHeaderCheck(!0),e.setRequestHeader("cookie",t.join("; ")))}appendCookies(e){for(let[t,r]of this.cookies)e.append("cookie",`${t}=${r.value}`)}}function eT(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}let eO=eE.setTimeout,eR=eE.clearTimeout;function eN(e,t){t.useNativeTimers?(e.setTimeoutFn=eO.bind(eE),e.clearTimeoutFn=eR.bind(eE)):(e.setTimeoutFn=eE.setTimeout.bind(eE),e.clearTimeoutFn=eE.clearTimeout.bind(eE))}function eA(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}var ej=r(8853);let eF=ej("engine.io-client:transport");class eL extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class eP extends eC{constructor(e){super(),this.writable=!1,eN(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new eL(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):eF("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=ey(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}let eD=ej("engine.io-client:polling");class eI extends eP{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{eD("paused"),this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(eD("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){eD("pre-pause polling complete"),--e||t()})),this.writable||(eD("we are currently writing - waiting to pause"),e++,this.once("drain",function(){eD("pre-pause writing complete"),--e||t()}))}else t()}_poll(){eD("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){eD("polling got data %s",e),e_(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this._poll():eD('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{eD("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(eD("transport open - closing"),e()):(eD("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,eb(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=eA()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let eB=!1;try{eB="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}let eM=eB,eU=ej("engine.io-client:polling");function eq(){}class e$ extends eI{constructor(e){if(super(e),"undefined"!=typeof location){let t="https:"===location.protocol,r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){let r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){eU("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class eW extends eC{constructor(e,t,r){super(),this.createRequest=e,eN(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;let t=eT(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(t);try{eU("xhr open %s: %s",this._method,this._uri),r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}catch(e){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},eU("xhr data %s",this._data),r.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}"undefined"!=typeof document&&(this._index=eW.requestsCount++,eW.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=eq,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete eW.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function eH(){for(let e in eW.requests)eW.requests.hasOwnProperty(e)&&eW.requests[e].abort()}eW.requestsCount=0,eW.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",eH):"function"==typeof addEventListener&&addEventListener("onpagehide"in eE?"pagehide":"unload",eH,!1)),function(){let e=function(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||eM))return new XMLHttpRequest}catch(e){}if(!t)try{return new eE[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}({xdomain:!1});e&&e.responseType}();let eV=eh||ed;class ez extends e${request(e={}){var t;return Object.assign(e,{xd:this.xd,cookieJar:null===(t=this.socket)||void 0===t?void 0:t._cookieJar},this.opts),new eW(e=>new eV(e),this.uri(),e)}}r(1727),r(1574),r(4242);var eG=r(4400);r(7730);let eX=ej("engine.io-client:websocket"),eY="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class eK extends eP{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,r=eY?{}:eT(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],s=t===e.length-1;em(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(e){eX("websocket closed before onclose event")}s&&eS(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=eA()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}eE.WebSocket||eE.MozWebSocket;class eJ extends eK{createSocket(e,t,r){var s;if(null===(s=this.socket)||void 0===s?void 0:s._cookieJar)for(let[e,t]of(r.headers=r.headers||{},r.headers.cookie="string"==typeof r.headers.cookie?[r.headers.cookie]:r.headers.cookie||[],this.socket._cookieJar.cookies))r.headers.cookie.push(`${e}=${t.value}`);return new eG(e,t,r)}doWrite(e,t){let r={};e.options&&(r.compress=e.options.compress),this.opts.perMessageDeflate&&("string"==typeof t?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(r.compress=!1),this.ws.send(t,r)}}let eZ=ej("engine.io-client:webtransport");class eQ extends eP{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{eZ("transport closed gracefully"),this.onClose()}).catch(e=>{eZ("transport closed due to %s",e),this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let t=function(e,t){n||(n=new TextDecoder);let r=[],s=0,o=-1,i=!1;return new TransformStream({transform(a,l){for(r.push(a);;){if(0===s){if(1>ew(r))break;let e=ex(r,1);i=(128&e[0])==128,s=(o=127&e[0])<126?3:126===o?1:2}else if(1===s){if(2>ew(r))break;let e=ex(r,2);o=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),s=3}else if(2===s){if(8>ew(r))break;let e=ex(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>2097151){l.enqueue(ef);break}o=0x100000000*n+t.getUint32(4),s=3}else{if(ew(r)<o)break;let e=ex(r,o);l.enqueue(ey(i?e:n.decode(e),t)),s=0}if(0===o||o>e){l.enqueue(ef);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),o=new TransformStream({transform(e,t){!function(e,t){if(e.data instanceof ArrayBuffer||ArrayBuffer.isView(e.data))return t(eg(e.data,!1));em(e,!0,e=>{s||(s=new TextEncoder),t(s.encode(e))})}(e,r=>{let s;let n=r.length;if(n<126)new DataView((s=new Uint8Array(1)).buffer).setUint8(0,n);else if(n<65536){let e=new DataView((s=new Uint8Array(3)).buffer);e.setUint8(0,126),e.setUint16(1,n)}else{let e=new DataView((s=new Uint8Array(9)).buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(n))}e.data&&"string"!=typeof e.data&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}});o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();let i=()=>{r.read().then(({done:e,value:t})=>{if(e){eZ("session is closed");return}eZ("received chunk: %o",t),this.onPacket(t),i()}).catch(e=>{eZ("an error occurred while reading: %s",e)})};i();let a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],s=t===e.length-1;this._writer.write(r).then(()=>{s&&eS(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}}let e0={websocket:eJ,webtransport:eQ,polling:ez},e1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e3=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function e2(e){if(e.length>8e3)throw"URI too long";let t=e,r=e.indexOf("["),s=e.indexOf("]");-1!=r&&-1!=s&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let n=e1.exec(e||""),o={},i=14;for(;i--;)o[e3[i]]=n[i]||"";return -1!=r&&-1!=s&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){let r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,o.path),o.queryKey=function(e,t){let r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,s){t&&(r[t]=s)}),r}(0,o.query),o}let e6=ej("engine.io-client:socket"),e9="function"==typeof addEventListener&&"function"==typeof removeEventListener,e4=[];e9&&addEventListener("offline",()=>{e6("closing %d connection(s) because the network was lost",e4.length),e4.forEach(e=>e())},!1);class e5 extends eC{constructor(e,t){if(super(),this.binaryType="nodebuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){let r=e2(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=e2(t.host).host);eN(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let e=0,s=r.length;e<s;e++){let s=r[e].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}(this.opts.query)),e9&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(e6("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},e4.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=new ek),this._open()}createTransport(e){e6('creating transport "%s"',e);let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return e6("options: %j",r),new this._transportsByName[e](r)}_open(){if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&e5.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){e6("setting transport %s",e.name),this.transport&&(e6("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){e6("socket open"),this.readyState="open",e5.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(e6('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}else e6('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();e6("flushing %d packets in socket",e.length),this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){let r=this.writeBuffer[t].data;if(r&&(e+="string"==typeof r?function(e){let t=0,r=0;for(let s=0,n=e.length;s<n;s++)(t=e.charCodeAt(s))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}(r):Math.ceil(1.33*(r.byteLength||r.size))),t>0&&e>this._maxPayload)return e6("only send %d out of %d packets",t,this.writeBuffer.length),this.writeBuffer.slice(0,t);e+=2}return e6("payload size is %d (max: %d)",e,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(e6("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,eS(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,s){if("function"==typeof t&&(s=t,t=void 0),"function"==typeof r&&(s=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;let n={type:e,data:t,options:r};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),s&&this.once("flush",s),this.flush()}close(){let e=()=>{this._onClose("forced close"),e6("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(e6("socket error %j",e),e5.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return e6("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(e6('socket close with reason: "%s"',e),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),e9&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=e4.indexOf(this._offlineEventListener);-1!==e&&(e6("removing listener for the 'offline' event"),e4.splice(e,1))}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}e5.protocol=4;class e8 extends e5{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade){e6("starting upgrade probes");for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}}_probe(e){e6('probing transport "%s"',e);let t=this.createTransport(e),r=!1;e5.priorWebsocketSuccess=!1;let s=()=>{r||(e6('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",s=>{if(!r){if("pong"===s.type&&"probe"===s.data)e6('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",t),t&&(e5.priorWebsocketSuccess="websocket"===t.name,e6('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{r||"closed"===this.readyState||(e6("changing transport and sending upgrade packet"),c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}));else{e6('probe transport "%s" failed',e);let r=Error("probe error");r.transport=t.name,this.emitReserved("upgradeError",r)}}}))};function n(){r||(r=!0,c(),t.close(),t=null)}let o=r=>{let s=Error("probe error: "+r);s.transport=t.name,n(),e6('probe transport "%s" failed because of error: %s',e,r),this.emitReserved("upgradeError",s)};function i(){o("transport closed")}function a(){o("socket closed")}function l(e){t&&e.name!==t.name&&(e6('"%s" works - aborting "%s"',e.name,t.name),n())}let c=()=>{t.removeListener("open",s),t.removeListener("error",o),t.removeListener("close",i),this.off("close",a),this.off("upgrading",l)};t.once("open",s),t.once("error",o),t.once("close",i),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}class e7 extends e8{constructor(e,t={}){let r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>e0[e]).filter(e=>!!e)),super(e,r)}}e7.protocol;var te=r(5240);let tt=te("socket.io-client:url"),tr="function"==typeof ArrayBuffer,ts=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,tn=Object.prototype.toString,to="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===tn.call(Blob),ti="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===tn.call(File);function ta(e){return tr&&(e instanceof ArrayBuffer||ts(e))||to&&e instanceof Blob||ti&&e instanceof File}let tl=r(5284)("socket.io-parser"),tc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],th=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(o||(o={}));class td{constructor(e){this.replacer=e}encode(e){return(tl("encoding packet %j",e),(e.type===o.EVENT||e.type===o.ACK)&&function e(t,r){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let r=0,s=t.length;r<s;r++)if(e(t[r]))return!0;return!1}if(ta(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0;return!1}(e))?this.encodeAsBinary({type:e.type===o.EVENT?o.BINARY_EVENT:o.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===o.BINARY_EVENT||e.type===o.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),tl("encoded %j as %s",e,t),t}encodeAsBinary(e){let t=function(e){let t=[],r=e.data;return e.data=function e(t,r){if(!t)return t;if(ta(t)){let e={_placeholder:!0,num:r.length};return r.push(t),e}if(Array.isArray(t)){let s=Array(t.length);for(let n=0;n<t.length;n++)s[n]=e(t[n],r);return s}if("object"==typeof t&&!(t instanceof Date)){let s={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=e(t[n],r));return s}return t}(r,t),e.attachments=t.length,{packet:e,buffers:t}}(e),r=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(r),s}}function tu(e){return"[object Object]"===Object.prototype.toString.call(e)}class tp extends eC{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let r=(t=this.decodeString(e)).type===o.BINARY_EVENT;r||t.type===o.BINARY_ACK?(t.type=r?o.EVENT:o.ACK,this.reconstructor=new tf(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(ta(e)||e.base64){if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+e)}decodeString(e){let t=0,r={type:Number(e.charAt(0))};if(void 0===o[r.type])throw Error("unknown packet type "+r.type);if(r.type===o.BINARY_EVENT||r.type===o.BINARY_ACK){let s=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let n=e.substring(s,t);if(n!=Number(n)||"-"!==e.charAt(t))throw Error("Illegal attachments");r.attachments=Number(n)}if("/"===e.charAt(t+1)){let s=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(s,t)}else r.nsp="/";let s=e.charAt(t+1);if(""!==s&&Number(s)==s){let s=t+1;for(;++t;){let r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){let s=this.tryParse(e.substr(t));if(tp.isPayloadValid(r.type,s))r.data=s;else throw Error("invalid payload")}return tl("decoded %s as %j",e,r),r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case o.CONNECT:return tu(t);case o.DISCONNECT:return void 0===t;case o.CONNECT_ERROR:return"string"==typeof t||tu(t);case o.EVENT:case o.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===tc.indexOf(t[0]));case o.ACK:case o.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class tf{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,r;let e=(t=this.reconPack,r=this.buffers,t.data=function e(t,r){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<r.length)return r[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=e(t[s],r);else if("object"==typeof t)for(let s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=e(t[s],r));return t}(t.data,r),delete t.attachments,t);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function tm(e,t,r){return e.on(t,r),function(){e.off(t,r)}}let tg=te("socket.io-client:socket"),ty=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class tv extends eC{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[tm(e,"open",this.onopen.bind(this)),tm(e,"packet",this.onpacket.bind(this)),tm(e,"error",this.onerror.bind(this)),tm(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,s,n;if(ty.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let i={type:o.EVENT,data:t};if(i.options={},i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let e=this.ids++;tg("emitting packet with ack id %d",e);let r=t.pop();this._registerAckCallback(e,r),i.id=e}let a=null===(s=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===s?void 0:s.writable,l=this.connected&&!(null===(n=this.io.engine)||void 0===n?void 0:n._hasPingExpired());return this.flags.volatile&&!a?tg("discard packet as the transport is not currently writable"):l?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i),this.flags={},this}_registerAckCallback(e,t){var r;let s=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===s){this.acks[e]=t;return}let n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&(tg("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(t,1));tg("event with ack id %d has timed out after %d ms",e,s),t.call(this,Error("operation has timed out"))},s),o=(...e)=>{this.io.clearTimeoutFn(n),t.apply(this,e)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((r,s)=>{let n=(e,t)=>e?s(e):r(t);n.withError=!0,t.push(n),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...s)=>{if(r===this._queue[0])return null!==e?r.tryCount>this._opts.retries&&(tg("packet [%d] is discarded after %d tries",r.id,r.tryCount),this._queue.shift(),t&&t(e)):(tg("packet [%d] was successfully sent",r.id),this._queue.shift(),t&&t(null,...s)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(tg("draining queue"),!this.connected||0===this._queue.length)return;let t=this._queue[0];if(t.pending&&!e){tg("packet [%d] has already been sent and is waiting for an ack",t.id);return}t.pending=!0,t.tryCount++,tg("sending packet [%d] (try n\xb0%d)",t.id,t.tryCount),this.flags=t.flags,this.emit.apply(this,t.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){tg("transport is open - connecting"),"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:o.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){tg("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}})}onpacket(e){if(!(e.nsp!==this.nsp))switch(e.type){case o.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.CONNECT_ERROR:this.destroy();let t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){let t=e.data||[];tg("emitting event %j",t),null!=e.id&&(tg("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(let t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,r=!1;return function(...s){r||(r=!0,tg("sending ack %j",s),t.packet({type:o.ACK,id:e,data:s}))}}onack(e){let t=this.acks[e.id];if("function"!=typeof t){tg("bad ack %s",e.id);return}delete this.acks[e.id],tg("calling ack %s with %j",e.id,e.data),t.withError&&e.data.unshift(null),t.apply(this,e.data)}onconnect(e,t){tg("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){tg("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(tg("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}}function tb(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}tb.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-r:e+r}return 0|Math.min(e,this.max)},tb.prototype.reset=function(){this.attempts=0},tb.prototype.setMin=function(e){this.ms=e},tb.prototype.setMax=function(e){this.max=e},tb.prototype.setJitter=function(e){this.jitter=e};let t_=te("socket.io-client:manager");class tw extends eC{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,eN(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new tb({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let s=t.parser||i;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(t_("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;t_("opening %s",this.uri),this.engine=new e7(this.uri,this.opts);let t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let s=tm(t,"open",function(){r.onopen(),e&&e()}),n=t=>{t_("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=tm(t,"error",n);if(!1!==this._timeout){let e=this._timeout;t_("connect attempt will timeout after %d",e);let r=this.setTimeoutFn(()=>{t_("connect attempt timed out after %d",e),s(),n(Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){t_("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(tm(e,"ping",this.onping.bind(this)),tm(e,"data",this.ondata.bind(this)),tm(e,"error",this.onerror.bind(this)),tm(e,"close",this.onclose.bind(this)),tm(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){eS(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){t_("error",e),this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new tv(this,e,t),this.nsps[e]=r),r}_destroy(e){for(let e of Object.keys(this.nsps))if(this.nsps[e].active){t_("socket %s is still active, skipping close",e);return}this._close()}_packet(e){t_("writing packet %j",e);let t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){t_("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){t_("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;t_("closed due to %s",e),this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)t_("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();t_("will wait %dms before reconnect attempt",t),this._reconnecting=!0;let r=this.setTimeoutFn(()=>{!e.skipReconnect&&(t_("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(t_("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(t_("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}let tx=te("socket.io-client"),tC={};function tS(e,t){let r;"object"==typeof e&&(t=e,e=void 0);let s=function(e,t="",r){let s=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(tt("protocol-less url %s",e),e=void 0!==r?r.protocol+"//"+e:"https://"+e),tt("parse %s",e),s=e2(e)),!s.port&&(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";let n=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+n+":"+s.port+t,s.href=s.protocol+"://"+n+(r&&r.port===s.port?"":":"+s.port),s}(e,(t=t||{}).path||"/socket.io"),n=s.source,o=s.id,i=s.path,a=tC[o]&&i in tC[o].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?(tx("ignoring socket cache for %s",n),r=new tw(n,t)):(tC[o]||(tx("new io instance for %s",n),tC[o]=new tw(n,t)),r=tC[o]),s.query&&!t.query&&(t.query=s.queryKey),r.socket(s.path,t)}Object.assign(tS,{Manager:tw,Socket:tv,io:tS,connect:tS});class tE{onStatusChange(e){return this.statusListeners.push(e),e(this.connectionStatus),()=>{this.statusListeners=this.statusListeners.filter(t=>t!==e)}}updateStatus(e){this.connectionStatus=e,this.statusListeners.forEach(t=>t(e))}connect(e){return this.socket&&this.socket.connected||(this.updateStatus("connecting"),this.socket=tS("http://13.210.70.201:3001/chat",{auth:{token:e},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:3e3,reconnectionDelayMax:5e3,timeout:1e4}),this.setupSocketListeners()),this.socket}setupSocketListeners(){this.socket&&(this.socket.on("connect",()=>{console.log("Socket connected"),this.updateStatus("connected"),this.reconnectionAttempts=0,this.reconnectionTimer&&(clearTimeout(this.reconnectionTimer),this.reconnectionTimer=null),this.connectedRooms.forEach(e=>{this.joinRoom(e)})}),this.socket.on("connect_error",e=>{console.error("Socket connection error:",e),this.updateStatus("error"),this.handleReconnection()}),this.socket.on("disconnect",e=>{console.log("Socket disconnected:",e),this.updateStatus("disconnected"),"io server disconnect"!==e&&"io client disconnect"!==e&&this.handleReconnection()}),this.socket.on("error",e=>{(e?.type==="UnauthorizedError"||e?.message?.includes("authentication"))&&(console.error("Socket authentication failed:",e),this.updateStatus("error"),this.disconnect())}))}handleReconnection(){this.reconnectionTimer||(this.reconnectionAttempts<5?(this.reconnectionAttempts++,this.updateStatus("connecting"),console.log(`Attempting to reconnect (${this.reconnectionAttempts}/5)...`),this.reconnectionTimer=setTimeout(()=>{if(this.reconnectionTimer=null,this.socket){let e=localStorage.getItem("token");e?(this.socket.auth={token:e},this.socket.connect()):(console.error("No authentication token available for reconnection"),this.updateStatus("error"),this.disconnect())}},3e3)):(console.error("Max reconnection attempts reached"),this.updateStatus("error"),this.disconnect()))}joinRoom(e){this.socket?.connected&&(this.socket.emit("joinRoom",e),this.socket.emit("subscribeToRoom",e),this.connectedRooms.add(e))}leaveRoom(e){this.socket?.connected&&(this.socket.emit("leaveRoom",e),this.connectedRooms.delete(e))}disconnect(){this.socket&&(this.connectedRooms.clear(),this.socket.disconnect(),this.socket=null)}getSocket(){return this.socket}getStatus(){return this.connectionStatus}constructor(){this.socket=null,this.connectedRooms=new Set,this.reconnectionAttempts=0,this.reconnectionTimer=null,this.connectionStatus="disconnected",this.statusListeners=[]}}let tk=new tE;function tT({roomId:e}){let[t,r]=(0,l.useState)([]),[s,n]=(0,l.useState)(""),[o,i]=(0,l.useState)(""),c=(0,l.useRef)(null),u=tk.getSocket();return(0,a.jsxs)(d.Zp,{className:"flex flex-col h-[600px]",children:[(0,a.jsx)(el,{className:"flex-1 p-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[t.map(e=>(0,a.jsxs)("div",{className:`p-2 rounded-lg ${"system"===e.type?"bg-gray-100":"dice"===e.type?"bg-blue-50":"bg-white border"}`,children:["system"!==e.type&&e.sender&&(0,a.jsx)("div",{className:"font-semibold text-sm",children:e.sender.username}),(0,a.jsx)("div",{className:"text-sm",children:e.content}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleTimeString()})]},`${e.id}-${e.createdAt}`)),(0,a.jsx)("div",{ref:c})]})}),(0,a.jsxs)("div",{className:"p-4 border-t space-y-4",children:[(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),o.trim()&&u&&(u.emit("rollDice",{roomId:e,dice:o}),i(""))},className:"flex gap-2",children:[(0,a.jsx)(y.p,{placeholder:"輸入骰子格式 (例如: 1d100)",value:o,onChange:e=>i(e.target.value)}),(0,a.jsx)(h.$,{type:"submit",children:"Roll"})]}),(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),s.trim()&&u&&(u.emit("sendMessage",{roomId:e,content:s}),n(""))},className:"flex gap-2",children:[(0,a.jsx)(y.p,{placeholder:"輸入訊息...",value:s,onChange:e=>n(e.target.value)}),(0,a.jsx)(h.$,{type:"submit",children:"Send"})]})]})]})}var tO=r(5740),tR=r(9217),tN=r(1675),tA=r(9632),tj=r(2534),tF=r(96);let tL=["top","right","bottom","left"],tP=Math.min,tD=Math.max,tI=Math.round,tB=Math.floor,tM=e=>({x:e,y:e}),tU={left:"right",right:"left",bottom:"top",top:"bottom"},tq={start:"end",end:"start"};function t$(e,t){return"function"==typeof e?e(t):e}function tW(e){return e.split("-")[0]}function tH(e){return e.split("-")[1]}function tV(e){return"x"===e?"y":"x"}function tz(e){return"y"===e?"height":"width"}function tG(e){return["top","bottom"].includes(tW(e))?"y":"x"}function tX(e){return e.replace(/start|end/g,e=>tq[e])}function tY(e){return e.replace(/left|right|bottom|top/g,e=>tU[e])}function tK(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function tJ(e){let{x:t,y:r,width:s,height:n}=e;return{width:s,height:n,top:r,left:t,right:t+s,bottom:r+n,x:t,y:r}}function tZ(e,t,r){let s,{reference:n,floating:o}=e,i=tG(t),a=tV(tG(t)),l=tz(a),c=tW(t),h="y"===i,d=n.x+n.width/2-o.width/2,u=n.y+n.height/2-o.height/2,p=n[l]/2-o[l]/2;switch(c){case"top":s={x:d,y:n.y-o.height};break;case"bottom":s={x:d,y:n.y+n.height};break;case"right":s={x:n.x+n.width,y:u};break;case"left":s={x:n.x-o.width,y:u};break;default:s={x:n.x,y:n.y}}switch(tH(t)){case"start":s[a]-=p*(r&&h?-1:1);break;case"end":s[a]+=p*(r&&h?-1:1)}return s}let tQ=async(e,t,r)=>{let{placement:s="bottom",strategy:n="absolute",middleware:o=[],platform:i}=r,a=o.filter(Boolean),l=await (null==i.isRTL?void 0:i.isRTL(t)),c=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:h,y:d}=tZ(c,s,l),u=s,p={},f=0;for(let r=0;r<a.length;r++){let{name:o,fn:m}=a[r],{x:g,y:y,data:v,reset:b}=await m({x:h,y:d,initialPlacement:s,placement:u,strategy:n,middlewareData:p,rects:c,platform:i,elements:{reference:e,floating:t}});h=null!=g?g:h,d=null!=y?y:d,p={...p,[o]:{...p[o],...v}},b&&f<=50&&(f++,"object"==typeof b&&(b.placement&&(u=b.placement),b.rects&&(c=!0===b.rects?await i.getElementRects({reference:e,floating:t,strategy:n}):b.rects),{x:h,y:d}=tZ(c,u,l)),r=-1)}return{x:h,y:d,placement:u,strategy:n,middlewareData:p}};async function t0(e,t){var r;void 0===t&&(t={});let{x:s,y:n,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:u=!1,padding:p=0}=t$(t,e),f=tK(p),m=a[u?"floating"===d?"reference":"floating":d],g=tJ(await o.getClippingRect({element:null==(r=await (null==o.isElement?void 0:o.isElement(m)))||r?m:m.contextElement||await (null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),y="floating"===d?{x:s,y:n,width:i.floating.width,height:i.floating.height}:i.reference,v=await (null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),b=await (null==o.isElement?void 0:o.isElement(v))&&await (null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},_=tJ(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-_.top+f.top)/b.y,bottom:(_.bottom-g.bottom+f.bottom)/b.y,left:(g.left-_.left+f.left)/b.x,right:(_.right-g.right+f.right)/b.x}}function t1(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function t3(e){return tL.some(t=>e[t]>=0)}async function t2(e,t){let{placement:r,platform:s,elements:n}=e,o=await (null==s.isRTL?void 0:s.isRTL(n.floating)),i=tW(r),a=tH(r),l="y"===tG(r),c=["left","top"].includes(i)?-1:1,h=o&&l?-1:1,d=t$(t,e),{mainAxis:u,crossAxis:p,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof f&&(p="end"===a?-1*f:f),l?{x:p*h,y:u*c}:{x:u*c,y:p*h}}function t6(){return"undefined"!=typeof window}function t9(e){return t8(e)?(e.nodeName||"").toLowerCase():"#document"}function t4(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function t5(e){var t;return null==(t=(t8(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function t8(e){return!!t6()&&(e instanceof Node||e instanceof t4(e).Node)}function t7(e){return!!t6()&&(e instanceof Element||e instanceof t4(e).Element)}function re(e){return!!t6()&&(e instanceof HTMLElement||e instanceof t4(e).HTMLElement)}function rt(e){return!!t6()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof t4(e).ShadowRoot)}function rr(e){let{overflow:t,overflowX:r,overflowY:s,display:n}=ra(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!["inline","contents"].includes(n)}function rs(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(e){return!1}})}function rn(e){let t=ro(),r=t7(e)?ra(e):e;return"none"!==r.transform||"none"!==r.perspective||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","perspective","filter"].some(e=>(r.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(r.contain||"").includes(e))}function ro(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function ri(e){return["html","body","#document"].includes(t9(e))}function ra(e){return t4(e).getComputedStyle(e)}function rl(e){return t7(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function rc(e){if("html"===t9(e))return e;let t=e.assignedSlot||e.parentNode||rt(e)&&e.host||t5(e);return rt(t)?t.host:t}function rh(e,t,r){var s;void 0===t&&(t=[]),void 0===r&&(r=!0);let n=function e(t){let r=rc(t);return ri(r)?t.ownerDocument?t.ownerDocument.body:t.body:re(r)&&rr(r)?r:e(r)}(e),o=n===(null==(s=e.ownerDocument)?void 0:s.body),i=t4(n);if(o){let e=rd(i);return t.concat(i,i.visualViewport||[],rr(n)?n:[],e&&r?rh(e):[])}return t.concat(n,rh(n,[],r))}function rd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ru(e){let t=ra(e),r=parseFloat(t.width)||0,s=parseFloat(t.height)||0,n=re(e),o=n?e.offsetWidth:r,i=n?e.offsetHeight:s,a=tI(r)!==o||tI(s)!==i;return a&&(r=o,s=i),{width:r,height:s,$:a}}function rp(e){return t7(e)?e:e.contextElement}function rf(e){let t=rp(e);if(!re(t))return tM(1);let r=t.getBoundingClientRect(),{width:s,height:n,$:o}=ru(t),i=(o?tI(r.width):r.width)/s,a=(o?tI(r.height):r.height)/n;return i&&Number.isFinite(i)||(i=1),a&&Number.isFinite(a)||(a=1),{x:i,y:a}}let rm=tM(0);function rg(e){let t=t4(e);return ro()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:rm}function ry(e,t,r,s){var n;void 0===t&&(t=!1),void 0===r&&(r=!1);let o=e.getBoundingClientRect(),i=rp(e),a=tM(1);t&&(s?t7(s)&&(a=rf(s)):a=rf(e));let l=(void 0===(n=r)&&(n=!1),s&&(!n||s===t4(i))&&n)?rg(i):tM(0),c=(o.left+l.x)/a.x,h=(o.top+l.y)/a.y,d=o.width/a.x,u=o.height/a.y;if(i){let e=t4(i),t=s&&t7(s)?t4(s):s,r=e,n=rd(r);for(;n&&s&&t!==r;){let e=rf(n),t=n.getBoundingClientRect(),s=ra(n),o=t.left+(n.clientLeft+parseFloat(s.paddingLeft))*e.x,i=t.top+(n.clientTop+parseFloat(s.paddingTop))*e.y;c*=e.x,h*=e.y,d*=e.x,u*=e.y,c+=o,h+=i,n=rd(r=t4(n))}}return tJ({width:d,height:u,x:c,y:h})}function rv(e,t){let r=rl(e).scrollLeft;return t?t.left+r:ry(t5(e)).left+r}function rb(e,t,r){void 0===r&&(r=!1);let s=e.getBoundingClientRect();return{x:s.left+t.scrollLeft-(r?0:rv(e,s)),y:s.top+t.scrollTop}}function r_(e,t,r){let s;if("viewport"===t)s=function(e,t){let r=t4(e),s=t5(e),n=r.visualViewport,o=s.clientWidth,i=s.clientHeight,a=0,l=0;if(n){o=n.width,i=n.height;let e=ro();(!e||e&&"fixed"===t)&&(a=n.offsetLeft,l=n.offsetTop)}return{width:o,height:i,x:a,y:l}}(e,r);else if("document"===t)s=function(e){let t=t5(e),r=rl(e),s=e.ownerDocument.body,n=tD(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=tD(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),i=-r.scrollLeft+rv(e),a=-r.scrollTop;return"rtl"===ra(s).direction&&(i+=tD(t.clientWidth,s.clientWidth)-n),{width:n,height:o,x:i,y:a}}(t5(e));else if(t7(t))s=function(e,t){let r=ry(e,!0,"fixed"===t),s=r.top+e.clientTop,n=r.left+e.clientLeft,o=re(e)?rf(e):tM(1),i=e.clientWidth*o.x;return{width:i,height:e.clientHeight*o.y,x:n*o.x,y:s*o.y}}(t,r);else{let r=rg(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return tJ(s)}function rw(e){return"static"===ra(e).position}function rx(e,t){if(!re(e)||"fixed"===ra(e).position)return null;if(t)return t(e);let r=e.offsetParent;return t5(e)===r&&(r=r.ownerDocument.body),r}function rC(e,t){let r=t4(e);if(rs(e))return r;if(!re(e)){let t=rc(e);for(;t&&!ri(t);){if(t7(t)&&!rw(t))return t;t=rc(t)}return r}let s=rx(e,t);for(;s&&["table","td","th"].includes(t9(s))&&rw(s);)s=rx(s,t);return s&&ri(s)&&rw(s)&&!rn(s)?r:s||function(e){let t=rc(e);for(;re(t)&&!ri(t);){if(rn(t))return t;if(rs(t))break;t=rc(t)}return null}(e)||r}let rS=async function(e){let t=this.getOffsetParent||rC,r=this.getDimensions,s=await r(e.floating);return{reference:function(e,t,r){let s=re(t),n=t5(t),o="fixed"===r,i=ry(e,!0,o,t),a={scrollLeft:0,scrollTop:0},l=tM(0);if(s||!s&&!o){if(("body"!==t9(t)||rr(n))&&(a=rl(t)),s){let e=ry(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else n&&(l.x=rv(n))}let c=!n||s||o?tM(0):rb(n,a);return{x:i.left+a.scrollLeft-l.x-c.x,y:i.top+a.scrollTop-l.y-c.y,width:i.width,height:i.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}},rE={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:s,strategy:n}=e,o="fixed"===n,i=t5(s),a=!!t&&rs(t.floating);if(s===i||a&&o)return r;let l={scrollLeft:0,scrollTop:0},c=tM(1),h=tM(0),d=re(s);if((d||!d&&!o)&&(("body"!==t9(s)||rr(i))&&(l=rl(s)),re(s))){let e=ry(s);c=rf(s),h.x=e.x+s.clientLeft,h.y=e.y+s.clientTop}let u=!i||d||o?tM(0):rb(i,l,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+h.x+u.x,y:r.y*c.y-l.scrollTop*c.y+h.y+u.y}},getDocumentElement:t5,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:s,strategy:n}=e,o=[..."clippingAncestors"===r?rs(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let s=rh(e,[],!1).filter(e=>t7(e)&&"body"!==t9(e)),n=null,o="fixed"===ra(e).position,i=o?rc(e):e;for(;t7(i)&&!ri(i);){let t=ra(i),r=rn(i);r||"fixed"!==t.position||(n=null),(o?!r&&!n:!r&&"static"===t.position&&!!n&&["absolute","fixed"].includes(n.position)||rr(i)&&!r&&function e(t,r){let s=rc(t);return!(s===r||!t7(s)||ri(s))&&("fixed"===ra(s).position||e(s,r))}(e,i))?s=s.filter(e=>e!==i):n=t,i=rc(i)}return t.set(e,s),s}(t,this._c):[].concat(r),s],i=o[0],a=o.reduce((e,r)=>{let s=r_(t,r,n);return e.top=tD(s.top,e.top),e.right=tP(s.right,e.right),e.bottom=tP(s.bottom,e.bottom),e.left=tD(s.left,e.left),e},r_(t,i,n));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:rC,getElementRects:rS,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=ru(e);return{width:t,height:r}},getScale:rf,isElement:t7,isRTL:function(e){return"rtl"===ra(e).direction}},rk=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:s,placement:n,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:h=0}=t$(e,t)||{};if(null==c)return{};let d=tK(h),u={x:r,y:s},p=tV(tG(n)),f=tz(p),m=await i.getDimensions(c),g="y"===p,y=g?"clientHeight":"clientWidth",v=o.reference[f]+o.reference[p]-u[p]-o.floating[f],b=u[p]-o.reference[p],_=await (null==i.getOffsetParent?void 0:i.getOffsetParent(c)),w=_?_[y]:0;w&&await (null==i.isElement?void 0:i.isElement(_))||(w=a.floating[y]||o.floating[f]);let x=w/2-m[f]/2-1,C=tP(d[g?"top":"left"],x),S=tP(d[g?"bottom":"right"],x),E=w-m[f]-S,k=w/2-m[f]/2+(v/2-b/2),T=tD(C,tP(k,E)),O=!l.arrow&&null!=tH(n)&&k!==T&&o.reference[f]/2-(k<C?C:S)-m[f]/2<0,R=O?k<C?k-C:k-E:0;return{[p]:u[p]+R,data:{[p]:T,centerOffset:k-T-R,...O&&{alignmentOffset:R}},reset:O}}}),rT=(e,t,r)=>{let s=new Map,n={platform:rE,...r},o={...n.platform,_c:s};return tQ(e,t,{...n,platform:o})};var rO="undefined"!=typeof document?l.useLayoutEffect:l.useEffect;function rR(e,t){let r,s,n;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(s=r;0!=s--;)if(!rR(e[s],t[s]))return!1;return!0}if((r=(n=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(s=r;0!=s--;)if(!({}).hasOwnProperty.call(t,n[s]))return!1;for(s=r;0!=s--;){let r=n[s];if(("_owner"!==r||!e.$$typeof)&&!rR(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function rN(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rA(e,t){let r=rN(e);return Math.round(t*r)/r}function rj(e){let t=l.useRef(e);return rO(()=>{t.current=e}),t}let rF=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:s}="function"==typeof e?e(t):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?rk({element:r.current,padding:s}).fn(t):{}:r?rk({element:r,padding:s}).fn(t):{}}}),rL=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,s;let{x:n,y:o,placement:i,middlewareData:a}=t,l=await t2(t,e);return i===(null==(r=a.offset)?void 0:r.placement)&&null!=(s=a.arrow)&&s.alignmentOffset?{}:{x:n+l.x,y:o+l.y,data:{...l,placement:i}}}}}(e),options:[e,t]}),rP=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:s,placement:n}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=t$(e,t),c={x:r,y:s},h=await t0(t,l),d=tG(tW(n)),u=tV(d),p=c[u],f=c[d];if(o){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",r=p+h[e],s=p-h[t];p=tD(r,tP(p,s))}if(i){let e="y"===d?"top":"left",t="y"===d?"bottom":"right",r=f+h[e],s=f-h[t];f=tD(r,tP(f,s))}let m=a.fn({...t,[u]:p,[d]:f});return{...m,data:{x:m.x-r,y:m.y-s,enabled:{[u]:o,[d]:i}}}}}}(e),options:[e,t]}),rD=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:r,y:s,placement:n,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=t$(e,t),h={x:r,y:s},d=tG(n),u=tV(d),p=h[u],f=h[d],m=t$(a,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){let e="y"===u?"height":"width",t=o.reference[u]-o.floating[e]+g.mainAxis,r=o.reference[u]+o.reference[e]-g.mainAxis;p<t?p=t:p>r&&(p=r)}if(c){var y,v;let e="y"===u?"width":"height",t=["top","left"].includes(tW(n)),r=o.reference[d]-o.floating[e]+(t&&(null==(y=i.offset)?void 0:y[d])||0)+(t?0:g.crossAxis),s=o.reference[d]+o.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[d])||0)-(t?g.crossAxis:0);f<r?f=r:f>s&&(f=s)}return{[u]:p,[d]:f}}}}(e),options:[e,t]}),rI=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,s,n,o,i;let{placement:a,middlewareData:l,rects:c,initialPlacement:h,platform:d,elements:u}=t,{mainAxis:p=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...b}=t$(e,t);if(null!=(r=l.arrow)&&r.alignmentOffset)return{};let _=tW(a),w=tG(h),x=tW(h)===h,C=await (null==d.isRTL?void 0:d.isRTL(u.floating)),S=m||(x||!v?[tY(h)]:function(e){let t=tY(e);return[tX(e),t,tX(t)]}(h)),E="none"!==y;!m&&E&&S.push(...function(e,t,r,s){let n=tH(e),o=function(e,t,r){let s=["left","right"],n=["right","left"];switch(e){case"top":case"bottom":if(r)return t?n:s;return t?s:n;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(tW(e),"start"===r,s);return n&&(o=o.map(e=>e+"-"+n),t&&(o=o.concat(o.map(tX)))),o}(h,v,y,C));let k=[h,...S],T=await t0(t,b),O=[],R=(null==(s=l.flip)?void 0:s.overflows)||[];if(p&&O.push(T[_]),f){let e=function(e,t,r){void 0===r&&(r=!1);let s=tH(e),n=tV(tG(e)),o=tz(n),i="x"===n?s===(r?"end":"start")?"right":"left":"start"===s?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=tY(i)),[i,tY(i)]}(a,c,C);O.push(T[e[0]],T[e[1]])}if(R=[...R,{placement:a,overflows:O}],!O.every(e=>e<=0)){let e=((null==(n=l.flip)?void 0:n.index)||0)+1,t=k[e];if(t)return{data:{index:e,overflows:R},reset:{placement:t}};let r=null==(o=R.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:o.placement;if(!r)switch(g){case"bestFit":{let e=null==(i=R.filter(e=>{if(E){let t=tG(e.placement);return t===w||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:i[0];e&&(r=e);break}case"initialPlacement":r=h}if(a!==r)return{reset:{placement:r}}}return{}}}}(e),options:[e,t]}),rB=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,s;let n,o;let{placement:i,rects:a,platform:l,elements:c}=t,{apply:h=()=>{},...d}=t$(e,t),u=await t0(t,d),p=tW(i),f=tH(i),m="y"===tG(i),{width:g,height:y}=a.floating;"top"===p||"bottom"===p?(n=p,o=f===(await (null==l.isRTL?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(o=p,n="end"===f?"top":"bottom");let v=y-u.top-u.bottom,b=g-u.left-u.right,_=tP(y-u[n],v),w=tP(g-u[o],b),x=!t.middlewareData.shift,C=_,S=w;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(S=b),null!=(s=t.middlewareData.shift)&&s.enabled.y&&(C=v),x&&!f){let e=tD(u.left,0),t=tD(u.right,0),r=tD(u.top,0),s=tD(u.bottom,0);m?S=g-2*(0!==e||0!==t?e+t:tD(u.left,u.right)):C=y-2*(0!==r||0!==s?r+s:tD(u.top,u.bottom))}await h({...t,availableWidth:S,availableHeight:C});let E=await l.getDimensions(c.floating);return g!==E.width||y!==E.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),rM=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:s="referenceHidden",...n}=t$(e,t);switch(s){case"referenceHidden":{let e=t1(await t0(t,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:t3(e)}}}case"escaped":{let e=t1(await t0(t,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:t3(e)}}}default:return{}}}}}(e),options:[e,t]}),rU=(e,t)=>({...rF(e),options:[e,t]});var rq=l.forwardRef((e,t)=>{let{children:r,width:s=10,height:n=5,...o}=e;return(0,a.jsx)(v.sG.svg,{...o,ref:t,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,a.jsx)("polygon",{points:"0,0 30,0 15,10"})})});rq.displayName="Arrow";var r$=r(8762),rW="Popper",[rH,rV]=(0,_.A)(rW),[rz,rG]=rH(rW),rX=e=>{let{__scopePopper:t,children:r}=e,[s,n]=l.useState(null);return(0,a.jsx)(rz,{scope:t,anchor:s,onAnchorChange:n,children:r})};rX.displayName=rW;var rY="PopperAnchor",rK=l.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:s,...n}=e,o=rG(rY,r),i=l.useRef(null),c=(0,w.s)(t,i);return l.useEffect(()=>{o.onAnchorChange(s?.current||i.current)}),s?null:(0,a.jsx)(v.sG.div,{...n,ref:c})});rK.displayName=rY;var rJ="PopperContent",[rZ,rQ]=rH(rJ),r0=l.forwardRef((e,t)=>{let{__scopePopper:r,side:s="bottom",sideOffset:n=0,align:o="center",alignOffset:i=0,arrowPadding:c=0,avoidCollisions:h=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:p="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:g,...y}=e,b=rG(rJ,r),[_,C]=l.useState(null),S=(0,w.s)(t,e=>C(e)),[k,T]=l.useState(null),O=(0,r$.X)(k),R=O?.width??0,N=O?.height??0,A="number"==typeof u?u:{top:0,right:0,bottom:0,left:0,...u},j=Array.isArray(d)?d:[d],F=j.length>0,L={padding:A,boundary:j.filter(r6),altBoundary:F},{refs:P,floatingStyles:D,placement:I,isPositioned:B,middlewareData:M}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:n,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:c,open:h}=e,[d,u]=l.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=l.useState(s);rR(p,s)||f(s);let[m,g]=l.useState(null),[y,v]=l.useState(null),b=l.useCallback(e=>{e!==C.current&&(C.current=e,g(e))},[]),_=l.useCallback(e=>{e!==S.current&&(S.current=e,v(e))},[]),w=o||m,x=i||y,C=l.useRef(null),S=l.useRef(null),E=l.useRef(d),k=null!=c,T=rj(c),O=rj(n),R=rj(h),N=l.useCallback(()=>{if(!C.current||!S.current)return;let e={placement:t,strategy:r,middleware:p};O.current&&(e.platform=O.current),rT(C.current,S.current,e).then(e=>{let t={...e,isPositioned:!1!==R.current};A.current&&!rR(E.current,t)&&(E.current=t,tO.flushSync(()=>{u(t)}))})},[p,t,r,O,R]);rO(()=>{!1===h&&E.current.isPositioned&&(E.current.isPositioned=!1,u(e=>({...e,isPositioned:!1})))},[h]);let A=l.useRef(!1);rO(()=>(A.current=!0,()=>{A.current=!1}),[]),rO(()=>{if(w&&(C.current=w),x&&(S.current=x),w&&x){if(T.current)return T.current(w,x,N);N()}},[w,x,N,T,k]);let j=l.useMemo(()=>({reference:C,floating:S,setReference:b,setFloating:_}),[b,_]),F=l.useMemo(()=>({reference:w,floating:x}),[w,x]),L=l.useMemo(()=>{let e={position:r,left:0,top:0};if(!F.floating)return e;let t=rA(F.floating,d.x),s=rA(F.floating,d.y);return a?{...e,transform:"translate("+t+"px, "+s+"px)",...rN(F.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:s}},[r,a,F.floating,d.x,d.y]);return l.useMemo(()=>({...d,update:N,refs:j,elements:F,floatingStyles:L}),[d,N,j,F,L])}({strategy:"fixed",placement:s+("center"!==o?"-"+o:""),whileElementsMounted:(...e)=>(function(e,t,r,s){let n;void 0===s&&(s={});let{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=s,h=rp(e),d=o||i?[...h?rh(h):[],...rh(t)]:[];d.forEach(e=>{o&&e.addEventListener("scroll",r,{passive:!0}),i&&e.addEventListener("resize",r)});let u=h&&l?function(e,t){let r,s=null,n=t5(e);function o(){var e;clearTimeout(r),null==(e=s)||e.disconnect(),s=null}return function i(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();let{left:c,top:h,width:d,height:u}=e.getBoundingClientRect();if(a||t(),!d||!u)return;let p=tB(h),f=tB(n.clientWidth-(c+d)),m={rootMargin:-p+"px "+-f+"px "+-tB(n.clientHeight-(h+u))+"px "+-tB(c)+"px",threshold:tD(0,tP(1,l))||1},g=!0;function y(e){let t=e[0].intersectionRatio;if(t!==l){if(!g)return i();t?i(!1,t):r=setTimeout(()=>{i(!1,1e-7)},1e3)}g=!1}try{s=new IntersectionObserver(y,{...m,root:n.ownerDocument})}catch(e){s=new IntersectionObserver(y,m)}s.observe(e)}(!0),o}(h,r):null,p=-1,f=null;a&&(f=new ResizeObserver(e=>{let[s]=e;s&&s.target===h&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),r()}),h&&!c&&f.observe(h),f.observe(t));let m=c?ry(e):null;return c&&function t(){let s=ry(e);m&&(s.x!==m.x||s.y!==m.y||s.width!==m.width||s.height!==m.height)&&r(),m=s,n=requestAnimationFrame(t)}(),r(),()=>{var e;d.forEach(e=>{o&&e.removeEventListener("scroll",r),i&&e.removeEventListener("resize",r)}),null==u||u(),null==(e=f)||e.disconnect(),f=null,c&&cancelAnimationFrame(n)}})(...e,{animationFrame:"always"===m}),elements:{reference:b.anchor},middleware:[rL({mainAxis:n+N,alignmentAxis:i}),h&&rP({mainAxis:!0,crossAxis:!1,limiter:"partial"===p?rD():void 0,...L}),h&&rI({...L}),rB({...L,apply:({elements:e,rects:t,availableWidth:r,availableHeight:s})=>{let{width:n,height:o}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${r}px`),i.setProperty("--radix-popper-available-height",`${s}px`),i.setProperty("--radix-popper-anchor-width",`${n}px`),i.setProperty("--radix-popper-anchor-height",`${o}px`)}}),k&&rU({element:k,padding:c}),r9({arrowWidth:R,arrowHeight:N}),f&&rM({strategy:"referenceHidden",...L})]}),[U,q]=r4(I),$=(0,x.c)(g);(0,E.N)(()=>{B&&$?.()},[B,$]);let W=M.arrow?.x,H=M.arrow?.y,V=M.arrow?.centerOffset!==0,[z,G]=l.useState();return(0,E.N)(()=>{_&&G(window.getComputedStyle(_).zIndex)},[_]),(0,a.jsx)("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:B?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:z,"--radix-popper-transform-origin":[M.transformOrigin?.x,M.transformOrigin?.y].join(" "),...M.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,a.jsx)(rZ,{scope:r,placedSide:U,onArrowChange:T,arrowX:W,arrowY:H,shouldHideArrow:V,children:(0,a.jsx)(v.sG.div,{"data-side":U,"data-align":q,...y,ref:S,style:{...y.style,animation:B?void 0:"none"}})})})});r0.displayName=rJ;var r1="PopperArrow",r3={top:"bottom",right:"left",bottom:"top",left:"right"},r2=l.forwardRef(function(e,t){let{__scopePopper:r,...s}=e,n=rQ(r1,r),o=r3[n.placedSide];return(0,a.jsx)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0},children:(0,a.jsx)(rq,{...s,ref:t,style:{...s.style,display:"block"}})})});function r6(e){return null!==e}r2.displayName=r1;var r9=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:s,middlewareData:n}=t,o=n.arrow?.centerOffset!==0,i=o?0:e.arrowWidth,a=o?0:e.arrowHeight,[l,c]=r4(r),h={start:"0%",center:"50%",end:"100%"}[c],d=(n.arrow?.x??0)+i/2,u=(n.arrow?.y??0)+a/2,p="",f="";return"bottom"===l?(p=o?h:`${d}px`,f=`${-a}px`):"top"===l?(p=o?h:`${d}px`,f=`${s.floating.height+a}px`):"right"===l?(p=`${-a}px`,f=o?h:`${u}px`):"left"===l&&(p=`${s.floating.width+a}px`,f=o?h:`${u}px`),{data:{x:p,y:f}}}});function r4(e){let[t,r="center"]=e.split("-");return[t,r]}var r5=r(707),r8=r(2705),r7=r(3024),se=r(6582),st=r(6441),sr=r(2421),ss=r(7783),sn=[" ","Enter","ArrowUp","ArrowDown"],so=[" ","Enter"],si="Select",[sa,sl,sc]=(0,tR.N)(si),[sh,sd]=(0,_.A)(si,[sc,rV]),su=rV(),[sp,sf]=sh(si),[sm,sg]=sh(si),sy=e=>{let{__scopeSelect:t,children:r,open:s,defaultOpen:n,onOpenChange:o,value:i,defaultValue:c,onValueChange:h,dir:d,name:u,autoComplete:p,disabled:f,required:m,form:g}=e,y=su(t),[v,b]=l.useState(null),[_,w]=l.useState(null),[x,C]=l.useState(!1),E=S(d),[k=!1,T]=(0,r7.i)({prop:s,defaultProp:n,onChange:o}),[O,R]=(0,r7.i)({prop:i,defaultProp:c,onChange:h}),N=l.useRef(null),A=!v||g||!!v.closest("form"),[j,F]=l.useState(new Set),L=Array.from(j).map(e=>e.props.value).join(";");return(0,a.jsx)(rX,{...y,children:(0,a.jsxs)(sp,{required:m,scope:t,trigger:v,onTriggerChange:b,valueNode:_,onValueNodeChange:w,valueNodeHasChildren:x,onValueNodeHasChildrenChange:C,contentId:(0,tF.B)(),value:O,onValueChange:R,open:k,onOpenChange:T,dir:E,triggerPointerDownPosRef:N,disabled:f,children:[(0,a.jsx)(sa.Provider,{scope:t,children:(0,a.jsx)(sm,{scope:e.__scopeSelect,onNativeOptionAdd:l.useCallback(e=>{F(t=>new Set(t).add(e))},[]),onNativeOptionRemove:l.useCallback(e=>{F(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:r})}),A?(0,a.jsxs)(s3,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:p,value:O,onChange:e=>R(e.target.value),disabled:f,form:g,children:[void 0===O?(0,a.jsx)("option",{value:""}):null,Array.from(j)]},L):null]})})};sy.displayName=si;var sv="SelectTrigger",sb=l.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:s=!1,...n}=e,o=su(r),i=sf(sv,r),c=i.disabled||s,h=(0,w.s)(t,i.onTriggerChange),d=sl(r),u=l.useRef("touch"),[p,f,m]=s2(e=>{let t=d().filter(e=>!e.disabled),r=t.find(e=>e.value===i.value),s=s6(t,e,r);void 0!==s&&i.onValueChange(s.value)}),g=e=>{c||(i.onOpenChange(!0),m()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,a.jsx)(rK,{asChild:!0,...o,children:(0,a.jsx)(v.sG.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":s1(i.value)?"":void 0,...n,ref:h,onClick:(0,T.m)(n.onClick,e=>{e.currentTarget.focus(),"mouse"!==u.current&&g(e)}),onPointerDown:(0,T.m)(n.onPointerDown,e=>{u.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:(0,T.m)(n.onKeyDown,e=>{let t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||f(e.key),(!t||" "!==e.key)&&sn.includes(e.key)&&(g(),e.preventDefault())})})})});sb.displayName=sv;var s_="SelectValue",sw=l.forwardRef((e,t)=>{let{__scopeSelect:r,className:s,style:n,children:o,placeholder:i="",...l}=e,c=sf(s_,r),{onValueNodeHasChildrenChange:h}=c,d=void 0!==o,u=(0,w.s)(t,c.onValueNodeChange);return(0,E.N)(()=>{h(d)},[h,d]),(0,a.jsx)(v.sG.span,{...l,ref:u,style:{pointerEvents:"none"},children:s1(c.value)?(0,a.jsx)(a.Fragment,{children:i}):o})});sw.displayName=s_;var sx=l.forwardRef((e,t)=>{let{__scopeSelect:r,children:s,...n}=e;return(0,a.jsx)(v.sG.span,{"aria-hidden":!0,...n,ref:t,children:s||"▼"})});sx.displayName="SelectIcon";var sC=e=>(0,a.jsx)(r5.Z,{asChild:!0,...e});sC.displayName="SelectPortal";var sS="SelectContent",sE=l.forwardRef((e,t)=>{let r=sf(sS,e.__scopeSelect),[s,n]=l.useState();return((0,E.N)(()=>{n(new DocumentFragment)},[]),r.open)?(0,a.jsx)(sO,{...e,ref:t}):s?tO.createPortal((0,a.jsx)(sk,{scope:e.__scopeSelect,children:(0,a.jsx)(sa.Slot,{scope:e.__scopeSelect,children:(0,a.jsx)("div",{children:e.children})})}),s):null});sE.displayName=sS;var[sk,sT]=sh(sS),sO=l.forwardRef((e,t)=>{let{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:o,onPointerDownOutside:i,side:c,sideOffset:h,align:d,alignOffset:u,arrowPadding:p,collisionBoundary:f,collisionPadding:m,sticky:g,hideWhenDetached:y,avoidCollisions:v,...b}=e,_=sf(sS,r),[x,C]=l.useState(null),[S,E]=l.useState(null),k=(0,w.s)(t,e=>C(e)),[O,R]=l.useState(null),[N,A]=l.useState(null),j=sl(r),[F,L]=l.useState(!1),P=l.useRef(!1);l.useEffect(()=>{if(x)return(0,sr.Eq)(x)},[x]),(0,tA.Oh)();let D=l.useCallback(e=>{let[t,...r]=j().map(e=>e.ref.current),[s]=r.slice(-1),n=document.activeElement;for(let r of e)if(r===n||(r?.scrollIntoView({block:"nearest"}),r===t&&S&&(S.scrollTop=0),r===s&&S&&(S.scrollTop=S.scrollHeight),r?.focus(),document.activeElement!==n))return},[j,S]),I=l.useCallback(()=>D([O,x]),[D,O,x]);l.useEffect(()=>{F&&I()},[F,I]);let{onOpenChange:B,triggerPointerDownPosRef:M}=_;l.useEffect(()=>{if(x){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(M.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(M.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():x.contains(r.target)||B(!1),document.removeEventListener("pointermove",t),M.current=null};return null!==M.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[x,B,M]),l.useEffect(()=>{let e=()=>B(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[B]);let[U,q]=s2(e=>{let t=j().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),s=s6(t,e,r);s&&setTimeout(()=>s.ref.current.focus())}),$=l.useCallback((e,t,r)=>{let s=!P.current&&!r;(void 0!==_.value&&_.value===t||s)&&(R(e),s&&(P.current=!0))},[_.value]),W=l.useCallback(()=>x?.focus(),[x]),H=l.useCallback((e,t,r)=>{let s=!P.current&&!r;(void 0!==_.value&&_.value===t||s)&&A(e)},[_.value]),V="popper"===s?sN:sR,z=V===sN?{side:c,sideOffset:h,align:d,alignOffset:u,arrowPadding:p,collisionBoundary:f,collisionPadding:m,sticky:g,hideWhenDetached:y,avoidCollisions:v}:{};return(0,a.jsx)(sk,{scope:r,content:x,viewport:S,onViewportChange:E,itemRefCallback:$,selectedItem:O,onItemLeave:W,itemTextRefCallback:H,focusSelectedItem:I,selectedItemText:N,position:s,isPositioned:F,searchRef:U,children:(0,a.jsx)(ss.A,{as:r8.DX,allowPinchZoom:!0,children:(0,a.jsx)(tj.n,{asChild:!0,trapped:_.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,T.m)(n,e=>{_.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,a.jsx)(tN.qW,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:(0,a.jsx)(V,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:e=>e.preventDefault(),...b,...z,onPlaced:()=>L(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:(0,T.m)(b.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||q(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=j().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,s=t.indexOf(r);t=t.slice(s+1)}setTimeout(()=>D(t)),e.preventDefault()}})})})})})})});sO.displayName="SelectContentImpl";var sR=l.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:s,...n}=e,o=sf(sS,r),i=sT(sS,r),[c,h]=l.useState(null),[d,u]=l.useState(null),p=(0,w.s)(t,e=>u(e)),f=sl(r),m=l.useRef(!1),g=l.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:_,focusSelectedItem:x}=i,C=l.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&d&&y&&b&&_){let e=o.trigger.getBoundingClientRect(),t=d.getBoundingClientRect(),r=o.valueNode.getBoundingClientRect(),n=_.getBoundingClientRect();if("rtl"!==o.dir){let s=n.left-t.left,o=r.left-s,i=e.left-o,a=e.width+i,l=Math.max(a,t.width),h=k(o,[10,Math.max(10,window.innerWidth-10-l)]);c.style.minWidth=a+"px",c.style.left=h+"px"}else{let s=t.right-n.right,o=window.innerWidth-r.right-s,i=window.innerWidth-e.right-o,a=e.width+i,l=Math.max(a,t.width),h=k(o,[10,Math.max(10,window.innerWidth-10-l)]);c.style.minWidth=a+"px",c.style.right=h+"px"}let i=f(),a=window.innerHeight-20,l=y.scrollHeight,h=window.getComputedStyle(d),u=parseInt(h.borderTopWidth,10),p=parseInt(h.paddingTop,10),g=parseInt(h.borderBottomWidth,10),v=u+p+l+parseInt(h.paddingBottom,10)+g,w=Math.min(5*b.offsetHeight,v),x=window.getComputedStyle(y),C=parseInt(x.paddingTop,10),S=parseInt(x.paddingBottom,10),E=e.top+e.height/2-10,T=b.offsetHeight/2,O=u+p+(b.offsetTop+T);if(O<=E){let e=i.length>0&&b===i[i.length-1].ref.current;c.style.bottom="0px";let t=Math.max(a-E,T+(e?S:0)+(d.clientHeight-y.offsetTop-y.offsetHeight)+g);c.style.height=O+t+"px"}else{let e=i.length>0&&b===i[0].ref.current;c.style.top="0px";let t=Math.max(E,u+y.offsetTop+(e?C:0)+T);c.style.height=t+(v-O)+"px",y.scrollTop=O-E+y.offsetTop}c.style.margin="10px 0",c.style.minHeight=w+"px",c.style.maxHeight=a+"px",s?.(),requestAnimationFrame(()=>m.current=!0)}},[f,o.trigger,o.valueNode,c,d,y,b,_,o.dir,s]);(0,E.N)(()=>C(),[C]);let[S,T]=l.useState();(0,E.N)(()=>{d&&T(window.getComputedStyle(d).zIndex)},[d]);let O=l.useCallback(e=>{e&&!0===g.current&&(C(),x?.(),g.current=!1)},[C,x]);return(0,a.jsx)(sA,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:m,onScrollButtonChange:O,children:(0,a.jsx)("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:(0,a.jsx)(v.sG.div,{...n,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});sR.displayName="SelectItemAlignedPosition";var sN=l.forwardRef((e,t)=>{let{__scopeSelect:r,align:s="start",collisionPadding:n=10,...o}=e,i=su(r);return(0,a.jsx)(r0,{...i,...o,ref:t,align:s,collisionPadding:n,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sN.displayName="SelectPopperPosition";var[sA,sj]=sh(sS,{}),sF="SelectViewport",sL=l.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:s,...n}=e,o=sT(sF,r),i=sj(sF,r),c=(0,w.s)(t,o.onViewportChange),h=l.useRef(0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),(0,a.jsx)(sa.Slot,{scope:r,children:(0,a.jsx)(v.sG.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:(0,T.m)(n.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:s}=i;if(s?.current&&r){let e=Math.abs(h.current-t.scrollTop);if(e>0){let s=window.innerHeight-20,n=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(n<s){let o=n+e,i=Math.min(s,o),a=o-i;r.style.height=i+"px","0px"===r.style.bottom&&(t.scrollTop=a>0?a:0,r.style.justifyContent="flex-end")}}}h.current=t.scrollTop})})})]})});sL.displayName=sF;var sP="SelectGroup",[sD,sI]=sh(sP);l.forwardRef((e,t)=>{let{__scopeSelect:r,...s}=e,n=(0,tF.B)();return(0,a.jsx)(sD,{scope:r,id:n,children:(0,a.jsx)(v.sG.div,{role:"group","aria-labelledby":n,...s,ref:t})})}).displayName=sP;var sB="SelectLabel",sM=l.forwardRef((e,t)=>{let{__scopeSelect:r,...s}=e,n=sI(sB,r);return(0,a.jsx)(v.sG.div,{id:n.id,...s,ref:t})});sM.displayName=sB;var sU="SelectItem",[sq,s$]=sh(sU),sW=l.forwardRef((e,t)=>{let{__scopeSelect:r,value:s,disabled:n=!1,textValue:o,...i}=e,c=sf(sU,r),h=sT(sU,r),d=c.value===s,[u,p]=l.useState(o??""),[f,m]=l.useState(!1),g=(0,w.s)(t,e=>h.itemRefCallback?.(e,s,n)),y=(0,tF.B)(),b=l.useRef("touch"),_=()=>{n||(c.onValueChange(s),c.onOpenChange(!1))};if(""===s)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,a.jsx)(sq,{scope:r,value:s,disabled:n,textId:y,isSelected:d,onItemTextChange:l.useCallback(e=>{p(t=>t||(e?.textContent??"").trim())},[]),children:(0,a.jsx)(sa.ItemSlot,{scope:r,value:s,disabled:n,textValue:u,children:(0,a.jsx)(v.sG.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:g,onFocus:(0,T.m)(i.onFocus,()=>m(!0)),onBlur:(0,T.m)(i.onBlur,()=>m(!1)),onClick:(0,T.m)(i.onClick,()=>{"mouse"!==b.current&&_()}),onPointerUp:(0,T.m)(i.onPointerUp,()=>{"mouse"===b.current&&_()}),onPointerDown:(0,T.m)(i.onPointerDown,e=>{b.current=e.pointerType}),onPointerMove:(0,T.m)(i.onPointerMove,e=>{b.current=e.pointerType,n?h.onItemLeave?.():"mouse"===b.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,T.m)(i.onPointerLeave,e=>{e.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:(0,T.m)(i.onKeyDown,e=>{h.searchRef?.current!==""&&" "===e.key||(so.includes(e.key)&&_()," "===e.key&&e.preventDefault())})})})})});sW.displayName=sU;var sH="SelectItemText",sV=l.forwardRef((e,t)=>{let{__scopeSelect:r,className:s,style:n,...o}=e,i=sf(sH,r),c=sT(sH,r),h=s$(sH,r),d=sg(sH,r),[u,p]=l.useState(null),f=(0,w.s)(t,e=>p(e),h.onItemTextChange,e=>c.itemTextRefCallback?.(e,h.value,h.disabled)),m=u?.textContent,g=l.useMemo(()=>(0,a.jsx)("option",{value:h.value,disabled:h.disabled,children:m},h.value),[h.disabled,h.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=d;return(0,E.N)(()=>(y(g),()=>b(g)),[y,b,g]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.sG.span,{id:h.textId,...o,ref:f}),h.isSelected&&i.valueNode&&!i.valueNodeHasChildren?tO.createPortal(o.children,i.valueNode):null]})});sV.displayName=sH;var sz="SelectItemIndicator",sG=l.forwardRef((e,t)=>{let{__scopeSelect:r,...s}=e;return s$(sz,r).isSelected?(0,a.jsx)(v.sG.span,{"aria-hidden":!0,...s,ref:t}):null});sG.displayName=sz;var sX="SelectScrollUpButton",sY=l.forwardRef((e,t)=>{let r=sT(sX,e.__scopeSelect),s=sj(sX,e.__scopeSelect),[n,o]=l.useState(!1),i=(0,w.s)(t,s.onScrollButtonChange);return(0,E.N)(()=>{if(r.viewport&&r.isPositioned){let e=function(){o(t.scrollTop>0)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),n?(0,a.jsx)(sZ,{...e,ref:i,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});sY.displayName=sX;var sK="SelectScrollDownButton",sJ=l.forwardRef((e,t)=>{let r=sT(sK,e.__scopeSelect),s=sj(sK,e.__scopeSelect),[n,o]=l.useState(!1),i=(0,w.s)(t,s.onScrollButtonChange);return(0,E.N)(()=>{if(r.viewport&&r.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;o(Math.ceil(t.scrollTop)<e)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),n?(0,a.jsx)(sZ,{...e,ref:i,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});sJ.displayName=sK;var sZ=l.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:s,...n}=e,o=sT("SelectScrollButton",r),i=l.useRef(null),c=sl(r),h=l.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return l.useEffect(()=>()=>h(),[h]),(0,E.N)(()=>{let e=c().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[c]),(0,a.jsx)(v.sG.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:(0,T.m)(n.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(s,50))}),onPointerMove:(0,T.m)(n.onPointerMove,()=>{o.onItemLeave?.(),null===i.current&&(i.current=window.setInterval(s,50))}),onPointerLeave:(0,T.m)(n.onPointerLeave,()=>{h()})})}),sQ=l.forwardRef((e,t)=>{let{__scopeSelect:r,...s}=e;return(0,a.jsx)(v.sG.div,{"aria-hidden":!0,...s,ref:t})});sQ.displayName="SelectSeparator";var s0="SelectArrow";function s1(e){return""===e||void 0===e}l.forwardRef((e,t)=>{let{__scopeSelect:r,...s}=e,n=su(r),o=sf(s0,r),i=sT(s0,r);return o.open&&"popper"===i.position?(0,a.jsx)(r2,{...n,...s,ref:t}):null}).displayName=s0;var s3=l.forwardRef((e,t)=>{let{value:r,...s}=e,n=l.useRef(null),o=(0,w.s)(t,n),i=(0,se.Z)(r);return l.useEffect(()=>{let e=n.current,t=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(i!==r&&t){let s=new Event("change",{bubbles:!0});t.call(e,r),e.dispatchEvent(s)}},[i,r]),(0,a.jsx)(st.s,{asChild:!0,children:(0,a.jsx)("select",{...s,ref:o,defaultValue:r})})});function s2(e){let t=(0,x.c)(e),r=l.useRef(""),s=l.useRef(0),n=l.useCallback(e=>{let n=r.current+e;t(n),function e(t){r.current=t,window.clearTimeout(s.current),""!==t&&(s.current=window.setTimeout(()=>e(""),1e3))}(n)},[t]),o=l.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,n,o]}function s6(e,t,r){var s;let n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,o=(s=Math.max(r?e.indexOf(r):-1,0),e.map((t,r)=>e[(s+r)%e.length]));1===n.length&&(o=o.filter(e=>e!==r));let i=o.find(e=>e.textValue.toLowerCase().startsWith(n.toLowerCase()));return i!==r?i:void 0}s3.displayName="BubbleSelect";var s9=r(1680);let s4=(0,s9.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),s5=(0,s9.A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var s8=r(4849);let s7=l.forwardRef(({className:e,children:t,...r},s)=>(0,a.jsxs)(sb,{ref:s,className:(0,ea.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,a.jsx)(sx,{asChild:!0,children:(0,a.jsx)(s4,{className:"h-4 w-4 opacity-50"})})]}));s7.displayName=sb.displayName;let ne=l.forwardRef(({className:e,...t},r)=>(0,a.jsx)(sY,{ref:r,className:(0,ea.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(s5,{className:"h-4 w-4"})}));ne.displayName=sY.displayName;let nt=l.forwardRef(({className:e,...t},r)=>(0,a.jsx)(sJ,{ref:r,className:(0,ea.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(s4,{className:"h-4 w-4"})}));nt.displayName=sJ.displayName;let nr=l.forwardRef(({className:e,children:t,position:r="popper",...s},n)=>(0,a.jsx)(sC,{children:(0,a.jsxs)(sE,{ref:n,className:(0,ea.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[(0,a.jsx)(ne,{}),(0,a.jsx)(sL,{className:(0,ea.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(nt,{})]})}));nr.displayName=sE.displayName,l.forwardRef(({className:e,...t},r)=>(0,a.jsx)(sM,{ref:r,className:(0,ea.cn)("px-2 py-1.5 text-sm font-semibold",e),...t})).displayName=sM.displayName;let ns=l.forwardRef(({className:e,children:t,...r},s)=>(0,a.jsxs)(sW,{ref:s,className:(0,ea.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(sG,{children:(0,a.jsx)(s8.A,{className:"h-4 w-4"})})}),(0,a.jsx)(sV,{children:t})]}));ns.displayName=sW.displayName,l.forwardRef(({className:e,...t},r)=>(0,a.jsx)(sQ,{ref:r,className:(0,ea.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=sQ.displayName,r(9826);var nn=r(8447);function no({params:e}){let t=(0,l.use)(e),[r,s]=(0,l.useState)(null),[n,o]=(0,l.useState)(!0),[i,y]=(0,l.useState)([]),[v,b]=(0,l.useState)(null),_=(0,c.useRouter)(),{toast:w}=(0,p.dj)(),x=async()=>{try{await f.w.startGame(Number(t.id)),w({title:"Success",description:"Game started successfully!"})}catch(e){w({variant:"destructive",title:"Error",description:e instanceof Error?e.message:"Failed to start game"})}},C=async e=>{try{"none"===e?await f.w.selectCharacter(Number(t.id),0):await f.w.selectCharacter(Number(t.id),Number(e)),w({title:"Success",description:"Character selected successfully"})}catch(e){console.error("Failed to select character:",e),w({variant:"destructive",title:"Error",description:"Failed to select character"})}},S=async()=>{try{await f.w.leave(Number(t.id)),w({title:"Success",description:"Successfully left the room"}),_.push("/rooms")}catch{w({variant:"destructive",title:"Error",description:"Failed to leave room"})}},E=r?.roomPlayers?.every(e=>null!==e.character)??!1,k=r?.host.id===v?.id;return n?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:"Loading..."})}):r?(0,a.jsxs)("div",{className:"container mx-auto py-10 space-y-6",children:[(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.ZB,{className:"text-2xl",children:r.name}),(0,a.jsx)(d.BT,{children:r.description})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[k&&r.status===m.A.WAITING&&(0,a.jsx)(h.$,{variant:"default",onClick:x,disabled:!E,children:"Start Game"}),(0,a.jsx)(h.$,{variant:"destructive",onClick:S,children:"Leave Room"})]})]})}),(0,a.jsx)(d.Wu,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Players"}),(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(u.XI,{children:[(0,a.jsx)(u.A0,{children:(0,a.jsxs)(u.Hj,{children:[(0,a.jsx)(u.nd,{children:"Player"}),(0,a.jsx)(u.nd,{children:"Status"}),(0,a.jsx)(u.nd,{children:"Character"}),(0,a.jsx)(u.nd,{children:"Ready"})]})}),(0,a.jsx)(u.BF,{children:r.roomPlayers?.map(e=>a.jsxs(u.Hj,{children:[a.jsxs(u.nA,{className:"flex items-center gap-2",children:[a.jsx(g.A,{className:"h-5 w-5"}),a.jsx("span",{children:e.player.username}),r.host.id===e.player.id&&a.jsx(nn.E,{variant:"secondary",children:"Host"})]}),a.jsx(u.nA,{children:a.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${e.player.isActive?"bg-green-50 text-green-700":"bg-gray-50 text-gray-700"}`,children:e.player.isActive?"Online":"Offline"})}),a.jsx(u.nA,{children:e.player.id===v?.id?a.jsxs(sy,{onValueChange:C,value:e.character?.id?.toString(),children:[a.jsx(s7,{className:"w-[200px]",children:a.jsx(sw,{placeholder:"Select character"})}),a.jsx(nr,{children:i.map(e=>a.jsxs(ns,{value:e.id.toString(),children:[e.name," - ",e.occupation]},e.id))})]}):a.jsx("span",{children:e.character?.name||"Not selected"})}),a.jsx(u.nA,{children:a.jsx(nn.E,{variant:e.isReady?"default":"secondary",children:e.isReady?"Ready":"Not Ready"})})]},e.id))})]})})]}),!E&&k&&(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"All players must select a character before the game can start."})]})})]}),(0,a.jsx)(tT,{roomId:Number(t.id)})]}):null}},8447:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var s=r(5512);r(8009);var n=r(1643),o=r(4195);let i=(0,n.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function a({className:e,variant:t,...r}){return(0,s.jsx)("div",{className:(0,o.cn)(i({variant:t}),e),...r})}},4590:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>h,ZB:()=>l,Zp:()=>i,aR:()=>a});var s=r(5512),n=r(8009),o=r(4195);let i=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let a=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...t}));a.displayName="CardHeader";let l=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h3",{ref:r,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("p",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let h=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",e),...t}));h.displayName="CardContent",n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},7722:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(5512),n=r(8009),o=r(4195);let i=n.forwardRef(({className:e,type:t,...r},n)=>(0,s.jsx)("input",{type:t,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));i.displayName="Input"},5249:(e,t,r)=>{"use strict";r.d(t,{A0:()=>a,BF:()=>l,Hj:()=>c,XI:()=>i,nA:()=>d,nd:()=>h});var s=r(5512),n=r(8009),o=r(4195);let i=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let a=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:(0,o.cn)("[&_tr]:border-b",e),...t}));a.displayName="TableHeader";let l=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let c=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tr",{ref:r,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));c.displayName="TableRow";let h=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));h.displayName="TableHead";let d=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableCell",n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},9826:(e,t,r)=>{"use strict";r.d(t,{y:()=>o});var s=r(5998);let n="http://13.210.70.201:3001",o={async getProfile(){let e=s.A.get("token"),t=await fetch(`${n}/auth/profile`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Failed to fetch profile");return t.json()},async getCharacters(){let e=s.A.get("token"),t=await fetch(`${n}/characters`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Failed to fetch characters");return t.json()}}},9230:(e,t,r)=>{"use strict";r.d(t,{w:()=>n});let s="http://13.210.70.201:3001",n={async findAll(){let e=localStorage.getItem("token"),t=await fetch(`${s}/rooms`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Failed to fetch rooms");return t.json()},async findOne(e){let t=localStorage.getItem("token"),r=await fetch(`${s}/rooms/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw Error("Failed to fetch room");return r.json()},async join(e){let t=localStorage.getItem("token");if(!(await fetch(`${s}/rooms/${e}/join`,{method:"POST",headers:{Authorization:`Bearer ${t}`}})).ok)throw Error("Failed to join room")},async leave(e){let t=localStorage.getItem("token");if(!(await fetch(`${s}/rooms/${e}/leave`,{method:"POST",headers:{Authorization:`Bearer ${t}`}})).ok)throw Error("Failed to leave room")},async create(e){let t=localStorage.getItem("token"),r=await fetch(`${s}/rooms`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)});if(!r.ok)throw Error("Failed to create room");return r.json()},async startGame(e){let t=localStorage.getItem("token"),r=await fetch(`${s}/rooms/${e}/start`,{method:"POST",headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw Error("Failed to start game");return r.json()},async selectCharacter(e,t){let r=localStorage.getItem("token"),n=await fetch(`${s}/rooms/${e}/select-character`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({characterId:t})});if(!n.ok)throw Error("Failed to select character");return n.json()}}},1877:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var s=function(e){return e.WAITING="waiting",e.PLAYING="playing",e.ENDED="ended",e}({})},7597:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/joe.lai/Desktop/projects/test/trpg/frontend/src/app/(authenticated)/rooms/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/joe.lai/Desktop/projects/test/trpg/frontend/src/app/(authenticated)/rooms/[id]/page.tsx","default")},6582:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(8009);function n(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},8762:(e,t,r)=>{"use strict";r.d(t,{X:()=>o});var s=r(8009),n=r(9397);function o(e){let[t,r]=s.useState(void 0);return(0,n.N)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,n;if(!Array.isArray(t)||!t.length)return;let o=t[0];if("borderBoxSize"in o){let e=o.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,n=t.blockSize}else s=e.offsetWidth,n=e.offsetHeight;r({width:s,height:n})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,22,77,581,648,541],()=>r(9317));module.exports=s})();