(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{6678:(e,t,r)=>{Promise.resolve().then(r.bind(r,126))},126:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var a=r(5155),s=r(2115),o=r(6046),n=r(3312),i=r(9749),c=r(2508),l=r(5564),d=r(7800),u=r(4423),m=r(5491),h=r(3900),f=r(1868),p=r(1567);let x=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsxs)(f.bL,{ref:t,className:(0,p.cn)("relative overflow-hidden",r),...o,children:[(0,a.jsx)(f.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,a.jsx)(g,{}),(0,a.jsx)(f.OK,{})]})});x.displayName=f.bL.displayName;let g=s.forwardRef((e,t)=>{let{className:r,orientation:s="vertical",...o}=e;return(0,a.jsx)(f.VM,{ref:t,orientation:s,className:(0,p.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 border-t border-t-transparent p-[1px]",r),...o,children:(0,a.jsx)(f.lr,{className:"relative flex-1 rounded-full bg-border"})})});g.displayName=f.VM.displayName;var v=r(1319);let y="".concat("http://3.107.26.3:3001","/chat");class b{onStatusChange(e){return this.statusListeners.push(e),e(this.connectionStatus),()=>{this.statusListeners=this.statusListeners.filter(t=>t!==e)}}updateStatus(e){this.connectionStatus=e,this.statusListeners.forEach(t=>t(e))}connect(e){return this.socket&&this.socket.connected||(this.updateStatus("connecting"),this.socket=(0,v.io)(y,{auth:{token:e},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:3e3,reconnectionDelayMax:5e3,timeout:1e4}),this.setupSocketListeners()),this.socket}setupSocketListeners(){this.socket&&(this.socket.on("connect",()=>{console.log("Socket connected"),this.updateStatus("connected"),this.reconnectionAttempts=0,this.reconnectionTimer&&(clearTimeout(this.reconnectionTimer),this.reconnectionTimer=null),this.connectedRooms.forEach(e=>{this.joinRoom(e)})}),this.socket.on("connect_error",e=>{console.error("Socket connection error:",e),this.updateStatus("error"),this.handleReconnection()}),this.socket.on("disconnect",e=>{console.log("Socket disconnected:",e),this.updateStatus("disconnected"),"io server disconnect"!==e&&"io client disconnect"!==e&&this.handleReconnection()}),this.socket.on("error",e=>{var t;((null==e?void 0:e.type)==="UnauthorizedError"||(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.includes("authentication")))&&(console.error("Socket authentication failed:",e),this.updateStatus("error"),this.disconnect())}))}handleReconnection(){this.reconnectionTimer||(this.reconnectionAttempts<5?(this.reconnectionAttempts++,this.updateStatus("connecting"),console.log("Attempting to reconnect (".concat(this.reconnectionAttempts,"/").concat(5,")...")),this.reconnectionTimer=setTimeout(()=>{if(this.reconnectionTimer=null,this.socket){let e=localStorage.getItem("token");e?(this.socket.auth={token:e},this.socket.connect()):(console.error("No authentication token available for reconnection"),this.updateStatus("error"),this.disconnect())}},3e3)):(console.error("Max reconnection attempts reached"),this.updateStatus("error"),this.disconnect()))}joinRoom(e){var t;(null===(t=this.socket)||void 0===t?void 0:t.connected)&&(this.socket.emit("joinRoom",e),this.socket.emit("subscribeToRoom",e),this.connectedRooms.add(e))}leaveRoom(e){var t;(null===(t=this.socket)||void 0===t?void 0:t.connected)&&(this.socket.emit("leaveRoom",e),this.connectedRooms.delete(e))}disconnect(){this.socket&&(this.connectedRooms.clear(),this.socket.disconnect(),this.socket=null)}getSocket(){return this.socket}getStatus(){return this.connectionStatus}constructor(){this.socket=null,this.connectedRooms=new Set,this.reconnectionAttempts=0,this.reconnectionTimer=null,this.connectionStatus="disconnected",this.statusListeners=[]}}let j=new b,N={async getRoomMessages(e){let t=localStorage.getItem("token"),r=await fetch("".concat("http://3.107.26.3:3001","/chat/rooms/").concat(e,"/messages"),{headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok)throw Error("Failed to fetch messages");return r.json()}};function w(e){let{roomId:t}=e,[r,o]=(0,s.useState)([]),[c,l]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),m=(0,s.useRef)(null),f=j.getSocket();return(0,s.useEffect)(()=>{if((async()=>{try{let e=await N.getRoomMessages(t);o(e.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()))}catch(e){console.error("Failed to load messages:",e)}})(),f){j.joinRoom(t);let e=e=>{console.log("Received message:",e),o(t=>t.some(t=>t.id===e.id)?t:[...t,e])};return f.on("message",e),()=>{f.off("message",e),j.leaveRoom(t)}}},[t,f]),(0,s.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[r]),(0,a.jsxs)(i.Zp,{className:"flex flex-col h-[600px]",children:[(0,a.jsx)(x,{className:"flex-1 p-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[r.map(e=>(0,a.jsxs)("div",{className:"p-2 rounded-lg ".concat("system"===e.type?"bg-gray-100":"dice"===e.type?"bg-blue-50":"bg-white border"),children:["system"!==e.type&&e.sender&&(0,a.jsx)("div",{className:"font-semibold text-sm",children:e.sender.username}),(0,a.jsx)("div",{className:"text-sm",children:e.content}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleTimeString()})]},"".concat(e.id,"-").concat(e.createdAt))),(0,a.jsx)("div",{ref:m})]})}),(0,a.jsxs)("div",{className:"p-4 border-t space-y-4",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.trim()&&f&&(f.emit("rollDice",{roomId:t,dice:d}),u(""))},className:"flex gap-2",children:[(0,a.jsx)(h.p,{placeholder:"輸入骰子格式 (例如: 1d100)",value:d,onChange:e=>u(e.target.value)}),(0,a.jsx)(n.$,{type:"submit",children:"Roll"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c.trim()&&f&&(f.emit("sendMessage",{roomId:t,content:c}),l(""))},className:"flex gap-2",children:[(0,a.jsx)(h.p,{placeholder:"輸入訊息...",value:c,onChange:e=>l(e.target.value)}),(0,a.jsx)(n.$,{type:"submit",children:"Send"})]})]})]})}var S=r(1961),T=r(1719),A=r(1902),k=r(8867);let R=S.bL;S.YJ;let E=S.WT,O=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsxs)(S.l9,{ref:t,className:(0,p.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...o,children:[s,(0,a.jsx)(S.In,{asChild:!0,children:(0,a.jsx)(T.A,{className:"h-4 w-4 opacity-50"})})]})});O.displayName=S.l9.displayName;let I=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(S.PP,{ref:t,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})});I.displayName=S.PP.displayName;let _=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(S.wn,{ref:t,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(T.A,{className:"h-4 w-4"})})});_.displayName=S.wn.displayName;let C=s.forwardRef((e,t)=>{let{className:r,children:s,position:o="popper",...n}=e;return(0,a.jsx)(S.ZL,{children:(0,a.jsxs)(S.UC,{ref:t,className:(0,p.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:o,...n,children:[(0,a.jsx)(I,{}),(0,a.jsx)(S.LM,{className:(0,p.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(_,{})]})})});C.displayName=S.UC.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(S.JU,{ref:t,className:(0,p.cn)("px-2 py-1.5 text-sm font-semibold",r),...s})}).displayName=S.JU.displayName;let D=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsxs)(S.q7,{ref:t,className:(0,p.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...o,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(S.VF,{children:(0,a.jsx)(k.A,{className:"h-4 w-4"})})}),(0,a.jsx)(S.p4,{children:s})]})});D.displayName=S.q7.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(S.wv,{ref:t,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=S.wv.displayName;var F=r(8496),P=r(5121);function M(e){var t,r,h;let{params:f}=e,p=(0,s.use)(f),[x,g]=(0,s.useState)(null),[v,y]=(0,s.useState)(!0),[b,N]=(0,s.useState)([]),[S,T]=(0,s.useState)(null),A=(0,o.useRouter)(),{toast:k}=(0,l.dj)();(0,s.useEffect)(()=>{(async()=>{try{let[e,t,r]=await Promise.all([d.w.findOne(Number(p.id)),F.y.getCharacters(),F.y.getProfile()]);g(e),N(t),T(r)}catch(e){console.error("Failed to load initial data:",e),k({variant:"destructive",title:"Error",description:"Failed to load initial data"}),A.push("/rooms")}finally{y(!1)}})()},[p.id,A,k]),(0,s.useEffect)(()=>{let e=localStorage.getItem("token");if(!e)return;let t=j.connect(e),r="room-".concat(p.id,"-updates"),a=e=>{console.log("Room update received in channel ".concat(r,":"),e),g(e)};return t.on("roomUpdate",a),j.joinRoom(Number(p.id)),()=>{t.off("roomUpdate",a),j.leaveRoom(Number(p.id))}},[p.id]);let I=async()=>{try{await d.w.startGame(Number(p.id)),k({title:"Success",description:"Game started successfully!"})}catch(e){k({variant:"destructive",title:"Error",description:e instanceof Error?e.message:"Failed to start game"})}},_=async e=>{try{"none"===e?await d.w.selectCharacter(Number(p.id),0):await d.w.selectCharacter(Number(p.id),Number(e)),k({title:"Success",description:"Character selected successfully"})}catch(e){console.error("Failed to select character:",e),k({variant:"destructive",title:"Error",description:"Failed to select character"})}},M=async()=>{try{await d.w.leave(Number(p.id)),k({title:"Success",description:"Successfully left the room"}),A.push("/rooms")}catch(e){k({variant:"destructive",title:"Error",description:"Failed to leave room"})}},z=null!==(h=null==x?void 0:null===(t=x.roomPlayers)||void 0===t?void 0:t.every(e=>null!==e.character))&&void 0!==h&&h,B=(null==x?void 0:x.host.id)===(null==S?void 0:S.id);return v?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:"Loading..."})}):x?(0,a.jsxs)("div",{className:"container mx-auto py-10 space-y-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ZB,{className:"text-2xl",children:x.name}),(0,a.jsx)(i.BT,{children:x.description})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[B&&x.status===u.A.WAITING&&(0,a.jsx)(n.$,{variant:"default",onClick:I,disabled:!z,children:"Start Game"}),(0,a.jsx)(n.$,{variant:"destructive",onClick:M,children:"Leave Room"})]})]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Players"}),(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(c.XI,{children:[(0,a.jsx)(c.A0,{children:(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nd,{children:"Player"}),(0,a.jsx)(c.nd,{children:"Status"}),(0,a.jsx)(c.nd,{children:"Character"}),(0,a.jsx)(c.nd,{children:"Ready"})]})}),(0,a.jsx)(c.BF,{children:null===(r=x.roomPlayers)||void 0===r?void 0:r.map(e=>{var t,r,s;return(0,a.jsxs)(c.Hj,{children:[(0,a.jsxs)(c.nA,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:e.player.username}),x.host.id===e.player.id&&(0,a.jsx)(P.E,{variant:"secondary",children:"Host"})]}),(0,a.jsx)(c.nA,{children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ".concat(e.player.isActive?"bg-green-50 text-green-700":"bg-gray-50 text-gray-700"),children:e.player.isActive?"Online":"Offline"})}),(0,a.jsx)(c.nA,{children:e.player.id===(null==S?void 0:S.id)?(0,a.jsxs)(R,{onValueChange:_,value:null===(r=e.character)||void 0===r?void 0:null===(t=r.id)||void 0===t?void 0:t.toString(),children:[(0,a.jsx)(O,{className:"w-[200px]",children:(0,a.jsx)(E,{placeholder:"Select character"})}),(0,a.jsx)(C,{children:b.map(e=>(0,a.jsxs)(D,{value:e.id.toString(),children:[e.name," - ",e.occupation]},e.id))})]}):(0,a.jsx)("span",{children:(null===(s=e.character)||void 0===s?void 0:s.name)||"Not selected"})}),(0,a.jsx)(c.nA,{children:(0,a.jsx)(P.E,{variant:e.isReady?"default":"secondary",children:e.isReady?"Ready":"Not Ready"})})]},e.id)})})]})})]}),!z&&B&&(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"All players must select a character before the game can start."})]})})]}),(0,a.jsx)(w,{roomId:Number(p.id)})]}):null}},5121:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r(5155);r(2115);var s=r(1027),o=r(1567);let n=(0,s.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)(n({variant:r}),t),...s})}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>l,r:()=>c});var a=r(5155),s=r(2115),o=r(2317),n=r(1027),i=r(1567);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:l=!1,...d}=e,u=l?o.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(c({variant:s,size:n,className:r})),ref:t,...d})});l.displayName="Button"},9749:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>c,Zp:()=>n,aR:()=>i});var a=r(5155),s=r(2115),o=r(1567);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},3900:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var a=r(5155),s=r(2115),o=r(1567);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},2508:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>c,Hj:()=>l,XI:()=>n,nA:()=>u,nd:()=>d});var a=r(5155),s=r(2115),o=r(1567);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",r),...s})})});n.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",r),...s})});c.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});l.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},5564:(e,t,r)=>{"use strict";r.d(t,{dj:()=>h});var a=r(2115),s=function(e){return e.ADD_TOAST="ADD_TOAST",e.UPDATE_TOAST="UPDATE_TOAST",e.DISMISS_TOAST="DISMISS_TOAST",e.REMOVE_TOAST="REMOVE_TOAST",e}(s||{});let o=new Map,n=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=i(l,e),c.forEach(e=>{e(l)})}function u(e){let{...t}=e,r=(m=(m+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}let m=0;function h(){let[e,t]=a.useState(l);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var a=r(3463),s=r(9795);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},8496:(e,t,r)=>{"use strict";r.d(t,{y:()=>o});var a=r(9208);let s="http://3.107.26.3:3001",o={async getProfile(){let e=a.A.get("token"),t=await fetch("".concat(s,"/auth/profile"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch profile");return t.json()},async getCharacters(){let e=a.A.get("token"),t=await fetch("".concat(s,"/characters"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch characters");return t.json()}}},7800:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});let a="http://3.107.26.3:3001",s={async findAll(){let e=localStorage.getItem("token"),t=await fetch("".concat(a,"/rooms"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch rooms");return t.json()},async findOne(e){let t=localStorage.getItem("token"),r=await fetch("".concat(a,"/rooms/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok)throw Error("Failed to fetch room");return r.json()},async join(e){let t=localStorage.getItem("token");if(!(await fetch("".concat(a,"/rooms/").concat(e,"/join"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}})).ok)throw Error("Failed to join room")},async leave(e){let t=localStorage.getItem("token");if(!(await fetch("".concat(a,"/rooms/").concat(e,"/leave"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}})).ok)throw Error("Failed to leave room")},async create(e){let t=localStorage.getItem("token"),r=await fetch("".concat(a,"/rooms"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)});if(!r.ok)throw Error("Failed to create room");return r.json()},async startGame(e){let t=localStorage.getItem("token"),r=await fetch("".concat(a,"/rooms/").concat(e,"/start"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok)throw Error("Failed to start game");return r.json()},async selectCharacter(e,t){let r=localStorage.getItem("token"),s=await fetch("".concat(a,"/rooms/").concat(e,"/select-character"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({characterId:t})});if(!s.ok)throw Error("Failed to select character");return s.json()}}},4423:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var a=function(e){return e.WAITING="waiting",e.PLAYING="playing",e.ENDED="ended",e}({})}},e=>{var t=t=>e(e.s=t);e.O(0,[365,199,978,727,441,517,358],()=>t(6678)),_N_E=e.O()}]);